window.__cvg_pixel = {"integration_config": {"ga4_measurement_ids": [], "enable_criteo": false, "taboola_click_id_parameters": [], "tracking_snippets": null}, "connections": [{"config": {"app": "klaviyo", "public_token": "Y8q6aT", "conversion_amount": "gross", "send_browser_events": true, "duplicate_browser_server_events": false, "viewed_page_event": "__activity__", "viewed_product_event": "Viewed Product", "added_to_cart_event": "Added to Cart", "removed_from_cart_event": "Removed from Cart", "started_checkout_event": "Started Checkout", "searched_event": "Searched Site", "viewed_collection_event": "Viewed Category", "placed_order_event": "Placed Order", "ordered_product_event": "Ordered Product", "klaviyo_custom_events": []}, "connection_id": 10787, "required_consent_category": null, "event_mappings": [{"id": 46673, "event_name": "$page_load", "destination_event_name": "__activity__", "config": {}}, {"id": 46674, "event_name": "Viewed Product", "destination_event_name": "Viewed Product", "config": {}}, {"id": 46675, "event_name": "Added To Cart", "destination_event_name": "Added to Cart", "config": {}}, {"id": 46676, "event_name": "Started Checkout", "destination_event_name": "Started Checkout", "config": {}}], "filters": [], "version": 2}, {"config": {"app": "fb", "pixel_id": "196216448411661", "content_id_type": "default", "conversion_amount": "gross", "custom_events": [], "fb_custom_properties": [], "send_subscribed_to_newsletter_as_leads": true, "block_external_tracking": false}, "connection_id": 10609, "required_consent_category": null, "event_mappings": [{"id": 2848, "event_name": "$page_load", "destination_event_name": "PageView", "config": {}}, {"id": 2849, "event_name": "Subscribed To Newsletter", "destination_event_name": "Lead", "config": {}}, {"id": 2850, "event_name": "Viewed Product", "destination_event_name": "ViewContent", "config": {}}, {"id": 2851, "event_name": "Viewed Collection", "destination_event_name": "ViewContent", "config": {}}, {"id": 2852, "event_name": "Added To Cart", "destination_event_name": "AddToCart", "config": {}}, {"id": 2853, "event_name": "Added To Wishlist", "destination_event_name": "AddToWishlist", "config": {}}, {"id": 2854, "event_name": "Started Checkout", "destination_event_name": "InitiateCheckout", "config": {}}, {"id": 2855, "event_name": "Searched", "destination_event_name": "Search", "config": {}}, {"id": 2856, "event_name": "Searched For Store", "destination_event_name": "FindLocation", "config": {}}, {"id": 2857, "event_name": "Added Payment Info", "destination_event_name": "AddPaymentInfo", "config": {}}, {"id": 2858, "event_name": "Placed Order", "destination_event_name": "Purchase", "config": {}}, {"id": 2860, "event_name": "Started Subscription", "destination_event_name": "Subscribe", "config": {}}], "filters": [], "version": 2}, {"config": {"app": "google_ads_conversions", "tag_id": "AW-16910421893", "internal_converge_data_layer": true, "item_id_type": "sku", "conversion_amount": "gross", "conversions": [{"event_name": "Placed Order", "conversion_id": "mEK7CPr85agaEIWfwv8-", "measurement_id": null, "server": false}, {"event_name": "Started Checkout", "conversion_id": "JpaACP385agaEIWfwv8-", "measurement_id": null, "server": false}, {"event_name": "Added To Cart", "conversion_id": "zjaJCKuG6qgaEIWfwv8-", "measurement_id": null, "server": false}, {"event_name": "Viewed Item", "conversion_id": "qLC8CKvHh6waEIWfwv8-", "measurement_id": null, "server": false}, {"event_name": "Added Shipping Info", "conversion_id": "-rBVCJir2agaEIWfwv8-", "measurement_id": null, "server": false}]}, "connection_id": 19167, "required_consent_category": null, "event_mappings": [{"id": 41946, "event_name": "Placed Order", "destination_event_name": "AW-16910421893/mEK7CPr85agaEIWfwv8-", "config": {}}, {"id": 41947, "event_name": "Started Checkout", "destination_event_name": "AW-16910421893/JpaACP385agaEIWfwv8-", "config": {}}, {"id": 41948, "event_name": "Added To Cart", "destination_event_name": "AW-16910421893/zjaJCKuG6qgaEIWfwv8-", "config": {}}, {"id": 41950, "event_name": "Added Shipping Info", "destination_event_name": "AW-16910421893/-rBVCJir2agaEIWfwv8-", "config": {}}, {"id": 51992, "event_name": "Viewed Product", "destination_event_name": "AW-16910421893/qLC8CKvHh6waEIWfwv8-", "config": {}}], "filters": [], "version": 2}, {"config": {"app": "bing", "tag_id": "56342561", "item_id_type": "sku", "conversion_amount": "gross", "custom_bing_events": []}, "connection_id": 17021, "required_consent_category": null, "event_mappings": [{"id": 50216, "event_name": "$page_load", "destination_event_name": "page_view", "config": {}}, {"id": 50217, "event_name": "Viewed Product", "destination_event_name": "view_item", "config": {}}, {"id": 50218, "event_name": "Viewed Collection", "destination_event_name": "view_item_list", "config": {}}, {"id": 50219, "event_name": "Added To Cart", "destination_event_name": "add_to_cart", "config": {}}, {"id": 50220, "event_name": "Searched", "destination_event_name": "view_search_results", "config": {}}, {"id": 50221, "event_name": "Started Checkout", "destination_event_name": "begin_checkout", "config": {}}, {"id": 50222, "event_name": "Added Payment Info", "destination_event_name": "add_payment_info", "config": {}}, {"id": 50223, "event_name": "Placed Order", "destination_event_name": "purchase", "config": {}}], "filters": [], "version": 2}, {"config": {"app": "ga4", "measurement_id": "G-H0WEHK1QCH", "item_id_type": "sku", "connection_type": "sgtm", "use_sgtm": true, "conversion_amount": "gross", "user_properties": [], "ga4_event_properties": [], "ga4_item_properties": [], "custom_ga4_events": [], "internal_converge_data_layer": true, "use_converge_hosted_script": false, "use_endpoints_v2": false, "set_user_id": false, "override_tag_id": null}, "connection_id": 17132, "required_consent_category": null, "event_mappings": [{"id": 32619, "event_name": "$page_load", "destination_event_name": "page_view", "config": {}}, {"id": 32620, "event_name": "Viewed Product", "destination_event_name": "view_item", "config": {}}, {"id": 32621, "event_name": "Logged In", "destination_event_name": "login", "config": {}}, {"id": 32622, "event_name": "Signed Up", "destination_event_name": "sign_up", "config": {}}, {"id": 32623, "event_name": "Selected Product", "destination_event_name": "select_item", "config": {}}, {"id": 32624, "event_name": "Chose Option", "destination_event_name": "select_item", "config": {}}, {"id": 32625, "event_name": "Added To Cart", "destination_event_name": "add_to_cart", "config": {}}, {"id": 32626, "event_name": "Added To Wishlist", "destination_event_name": "add_to_wishlist", "config": {}}, {"id": 32627, "event_name": "Removed From Wishlist", "destination_event_name": "remove_from_wishlist", "config": {}}, {"id": 32628, "event_name": "Removed From Cart", "destination_event_name": "remove_from_cart", "config": {}}, {"id": 32629, "event_name": "Viewed Cart", "destination_event_name": "view_cart", "config": {}}, {"id": 32630, "event_name": "Started Checkout", "destination_event_name": "begin_checkout", "config": {}}, {"id": 32631, "event_name": "Searched", "destination_event_name": "search", "config": {}}, {"id": 32632, "event_name": "Viewed Collection", "destination_event_name": "view_item_list", "config": {}}, {"id": 32633, "event_name": "Added Contact Info", "destination_event_name": "add_contact_info", "config": {}}, {"id": 32634, "event_name": "Added Payment Info", "destination_event_name": "add_payment_info", "config": {}}, {"id": 32635, "event_name": "Added Shipping Info", "destination_event_name": "add_shipping_info", "config": {}}], "filters": [], "version": 2}, {"config": {"app": "google_ads_conversions", "tag_id": "AW-709884842", "internal_converge_data_layer": true, "item_id_type": "sku", "conversion_amount": "gross", "conversions": [{"event_name": "Placed Order", "conversion_id": "hVFWCNrrq9cBEKr3v9IC", "measurement_id": null, "server": false}, {"event_name": "Added To Cart", "conversion_id": "yQEECK_e3ZICEKr3v9IC", "measurement_id": null, "server": false}, {"event_name": "Started Checkout", "conversion_id": "u2gICLay25ECEKr3v9IC", "measurement_id": null, "server": false}, {"event_name": "Viewed Item", "conversion_id": "ZCEeCJatspICEKr3v9IC", "measurement_id": null, "server": false}, {"event_name": "Added Shipping Info", "conversion_id": "a67pCMac3pICEKr3v9IC", "measurement_id": null, "server": false}]}, "connection_id": 19235, "required_consent_category": null, "event_mappings": [{"id": 42005, "event_name": "Placed Order", "destination_event_name": "AW-709884842/hVFWCNrrq9cBEKr3v9IC", "config": {}}, {"id": 42006, "event_name": "Added To Cart", "destination_event_name": "AW-709884842/yQEECK_e3ZICEKr3v9IC", "config": {}}, {"id": 42007, "event_name": "Started Checkout", "destination_event_name": "AW-709884842/u2gICLay25ECEKr3v9IC", "config": {}}, {"id": 42009, "event_name": "Added Shipping Info", "destination_event_name": "AW-709884842/a67pCMac3pICEKr3v9IC", "config": {}}, {"id": 51993, "event_name": "Viewed Product", "destination_event_name": "AW-709884842/ZCEeCJatspICEKr3v9IC", "config": {}}], "filters": [], "version": 2}, {"config": {"app": "applovin", "event_key": "0b97a3c1-9ede-418f-98cf-3483dbe85297", "item_id_type": "sku", "conversion_amount": "gross"}, "connection_id": 16892, "required_consent_category": null, "event_mappings": [{"id": 51494, "event_name": "Searched", "destination_event_name": "search", "config": {}}, {"id": 51489, "event_name": "$page_load", "destination_event_name": "page_view", "config": {}}, {"id": 51490, "event_name": "Viewed Product", "destination_event_name": "view_item", "config": {}}, {"id": 51491, "event_name": "Added To Cart", "destination_event_name": "add_to_cart", "config": {}}, {"id": 51492, "event_name": "Removed From Cart", "destination_event_name": "remove_from_cart", "config": {}}, {"id": 51493, "event_name": "Started Checkout", "destination_event_name": "begin_checkout", "config": {}}, {"id": 51495, "event_name": "Added Payment Info", "destination_event_name": "add_payment_info", "config": {}}, {"id": 51496, "event_name": "Placed Order", "destination_event_name": "purchase", "config": {}}], "filters": [], "version": 2}, {"config": {"app": "google_ads_remarketing", "tag_id": "AW-16910421893", "internal_converge_data_layer": true, "item_id_type": "sku", "conversion_amount": "gross", "custom_google_ads_events": []}, "connection_id": 19168, "required_consent_category": null, "event_mappings": [{"id": 44824, "event_name": "Viewed Product", "destination_event_name": "view_item", "config": {}}, {"id": 44825, "event_name": "Selected Product", "destination_event_name": "select_item", "config": {}}, {"id": 44826, "event_name": "Viewed Collection", "destination_event_name": "view_item_list", "config": {}}, {"id": 44827, "event_name": "Added To Cart", "destination_event_name": "add_to_cart", "config": {}}, {"id": 44828, "event_name": "Removed From Cart", "destination_event_name": "remove_from_cart", "config": {}}, {"id": 44829, "event_name": "Added To Wishlist", "destination_event_name": "add_to_wishlist", "config": {}}, {"id": 44830, "event_name": "Removed From Wishlist", "destination_event_name": "remove_from_wishlist", "config": {}}, {"id": 44831, "event_name": "Searched For Store", "destination_event_name": "search", "config": {}}, {"id": 44832, "event_name": "Viewed Cart", "destination_event_name": "view_cart", "config": {}}, {"id": 44833, "event_name": "Started Checkout", "destination_event_name": "begin_checkout", "config": {}}, {"id": 44834, "event_name": "Added Payment Info", "destination_event_name": "add_payment_info", "config": {}}, {"id": 44835, "event_name": "Placed Order", "destination_event_name": "purchase", "config": {}}], "filters": [], "version": 2}, {"config": {"app": "custom_html", "setup_html": "<script>\r\n  !function(w,d,s,t,a){if(w.amzn)return;w.amzn=a=function(){w.amzn.q.push([arguments,(new Date).getTime()])};a.q=[];a.version=\"0.0\";s=d.createElement(\"script\");s.src=\"https://c.amazon-adsystem.com/aat/amzn.js\";s.id=\"amzn-pixel\";s.async=true;t=d.getElementsByTagName(\"script\")[0];t.parentNode.insertBefore(s,t)}(window,document);\r\n  amzn(\"setRegion\", \"NA\");\r\n  amzn(\"addTag\", \"a38d2cb0-2894-4eb0-82e2-d6e00e9c535e\");\r\n</script>", "event_html": [{"event_name": "$page_load", "content": "<script>amzn(\"trackEvent\", \"PageView\", { page: {{ $title }} }); </script>\r\n"}, {"event_name": "Added To Cart", "content": "<script>\r\n    amzn('trackEvent', 'AddToCart', {\r\n        value: {{  price }},\r\n        currencyCode: {{ currency }},\r\n        unitsSold: {{ quantity }},\r\n        contentId: {{ product_id }},\r\n        name: {{ name }} + ' ' + {{ variant_name }}\r\n    });\r\n</script>"}, {"event_name": "Placed Order", "content": "<script>\r\n    var items = {{ items }} || [];\r\n    amzn(\"trackEvent\", \"Purchase\", {\r\n        eventId: {{ id }},\r\n        value: {{ total_price }},\r\n        currencyCode: {{ currency }},\r\n        unitsSold: items.reduce((total, item) => total + item.quantity, 0),\r\n        items: items.map(item => ({\r\n            name: item.name + ' ' + item.variant_name,\r\n            sku: item.sku,\r\n            unitsSold: item.quantity,\r\n            value: item.price\r\n        })\r\n    });\r\n</script>"}]}, "connection_id": 12317, "required_consent_category": null, "event_mappings": [{"id": 46563, "event_name": "*", "destination_event_name": "*", "config": {}}], "filters": [], "version": 2}, {"config": {"app": "google_ads_remarketing", "tag_id": "AW-709884842", "internal_converge_data_layer": true, "item_id_type": "sku", "conversion_amount": "gross", "custom_google_ads_events": []}, "connection_id": 19236, "required_consent_category": null, "event_mappings": [{"id": 45239, "event_name": "Viewed Product", "destination_event_name": "view_item", "config": {}}, {"id": 45240, "event_name": "Selected Product", "destination_event_name": "select_item", "config": {}}, {"id": 45241, "event_name": "Viewed Collection", "destination_event_name": "view_item_list", "config": {}}, {"id": 45242, "event_name": "Added To Cart", "destination_event_name": "add_to_cart", "config": {}}, {"id": 45243, "event_name": "Removed From Cart", "destination_event_name": "remove_from_cart", "config": {}}, {"id": 45244, "event_name": "Added To Wishlist", "destination_event_name": "add_to_wishlist", "config": {}}, {"id": 45245, "event_name": "Removed From Wishlist", "destination_event_name": "remove_from_wishlist", "config": {}}, {"id": 45246, "event_name": "Searched For Store", "destination_event_name": "search", "config": {}}, {"id": 45247, "event_name": "Viewed Cart", "destination_event_name": "view_cart", "config": {}}, {"id": 45248, "event_name": "Started Checkout", "destination_event_name": "begin_checkout", "config": {}}, {"id": 45249, "event_name": "Added Payment Info", "destination_event_name": "add_payment_info", "config": {}}, {"id": 45250, "event_name": "Placed Order", "destination_event_name": "purchase", "config": {}}], "filters": [], "version": 2}, {"config": {"app": "tiktok", "pixel_code": "CFQKAKRC77U7U9B6G7LG", "content_id_type": "default", "tiktok_custom_events": [], "conversion_amount": "gross"}, "connection_id": 11462, "required_consent_category": null, "event_mappings": [{"id": 49753, "event_name": "$page_load", "destination_event_name": "Page", "config": {}}, {"id": 49754, "event_name": "Viewed Product", "destination_event_name": "ViewContent", "config": {}}, {"id": 49755, "event_name": "Added To Cart", "destination_event_name": "AddToCart", "config": {}}, {"id": 49756, "event_name": "Started Checkout", "destination_event_name": "InitiateCheckout", "config": {}}, {"id": 49757, "event_name": "Searched", "destination_event_name": "Search", "config": {}}, {"id": 49758, "event_name": "Added Payment Info", "destination_event_name": "AddPaymentInfo", "config": {}}, {"id": 49759, "event_name": "Placed Order", "destination_event_name": "CompletePayment", "config": {}}, {"id": 49761, "event_name": "Started Subscription", "destination_event_name": "Subscribe", "config": {}}, {"id": 49762, "event_name": "Activated Subscription", "destination_event_name": "Subscribe", "config": {}}, {"id": 49763, "event_name": "Subscribed To Newsletter", "destination_event_name": "CompleteRegistration", "config": {}}], "filters": [], "version": 2}], "custom_events": null, "public_token": "C2cT7H", "pixel_revision_id": "337824"};
!function(e){"use strict";function t(e,t,i){return t=r(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,n()?Reflect.construct(t,i||[],r(e).constructor):t.apply(e,i))}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}function n(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(n=function(){return!!e})()}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){var t="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return function(e,t,r){if(n())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,t);var s=new(e.bind.apply(e,o));return r&&i(s,r.prototype),s}(e,arguments,r(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),i(o,e)},s(e)}var a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},a(e,t)};function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var u=function(){return u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)};function d(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function p(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}function h(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function l(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function v(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var g,m=function(e){return e.replace(/\/$/,"")},y=function(e){return e&&e.startsWith("/")?window.location.origin+e:e},_=function(){return m(y(window.__cvg_api_endpoint)||"https://app.runconverge.com/api/tr")},w=function(e){function t(r){var n=e.call(this,r)||this;return n.name="ExceededRateLimitError",Object.setPrototypeOf(n,t.prototype),n}return c(t,e),t}(Error),b=function(){function e(e,t){this.MAX_QUEUE_SIZE=1e3,this.queue=[],this.capacity=e,this.rate=t,this.tokens=e,this.run()}return e.prototype.acquireToken=function(){return p(this,void 0,void 0,(function(){var e=this;return h(this,(function(t){return 0===this.queue.length&&this.tokens>0?(this.tokens-=1,[2]):[2,new Promise((function(t,r){e.queue.length<e.MAX_QUEUE_SIZE?e.queue.push((function(){e.tokens-=1,t(void 0)})):r(new w("Leaky bucket queue is full"))}))]}))}))},e.prototype.run=function(){return p(this,void 0,void 0,(function(){var e,t=this;return h(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(e){return setTimeout(e,1e3/t.rate)}))];case 1:return r.sent(),this.tokens<this.capacity&&(this.tokens+=1,(e=this.queue.shift())&&e()),[3,0];case 2:return[2]}}))}))},e}(),k={USD:1,AUD:1.568,CAD:1.419,CHF:.898,CNY:7.236,EUR:.953,GBP:.79,HKD:7.772,IDR:16307.167,INR:86.681,JPY:149.42,KRW:1426.214,MYR:4.401,NZD:1.737,PHP:57.844,SGD:1.333,THB:33.477,TWD:32.722,VND:25485.034,BGN:1.867,BRL:5.73,CLP:942.905,CZK:23.95,DKK:7.122,HUF:384.089,ILS:3.573,ISK:139.111,MXN:20.413,NOK:11.115,PLN:3.969,RON:4.752,SEK:10.645,TRY:36.489,UAH:41.722,ZAR:18.411,AED:3.673,EGP:50.651,MDL:18.624,RSD:111.791,RUB:87.821,JOD:.709,LBP:89470.455,AMD:395.699,AZN:1.7,BDT:121.921,DOP:62.188,DZD:134.652,GEL:2.81,IQD:1309.617,KGS:87.424,KZT:503.271,LYD:4.891,MAD:9.956,PKR:279.3,SAR:3.75,TJS:10.941,TMT:3.499,TND:3.165,UZS:12931.363,XAF:626.81,XOF:626.81,BYN:3.273,AFN:73.957,ALL:94.439,ANG:1.79,AOA:918.079,ARS:1058.84,AWG:1.79,BAM:1.869,BBD:2,BHD:.376,BIF:2923.35,BND:1.337,BOB:6.909,BSD:1,BWP:13.812,BZD:2,CDF:2855.7,COP:4076.513,CRC:505.409,CUP:24,CVE:105.366,DJF:177.721,ERN:15.38,ETB:128.465,FJD:2.314,GHS:15.523,GIP:.791,GMD:70.349,GNF:8607.613,GTQ:7.716,GYD:209.22,HNL:25.559,HTG:130.629,JMD:157.501,KES:129.464,KHR:4013.865,KMF:470.108,KWD:.309,LAK:20486.383,LKR:296.039,LRD:198.09,LSL:18.39,MGA:4701.08,MKD:58.833,MMK:2100.048,MNT:3462.59,MOP:8.004,MRU:39.83,MUR:46.454,MVR:15.41,MWK:1732.827,MZN:63.841,NAD:18.39,NGN:1500.74,NIO:36.784,NPR:138.61,OMR:.385,PAB:1,PEN:3.679,PGK:4.049,PYG:7901.101,QAR:3.64,RWF:1402.508,SBD:8.446,SCR:14.728,SDG:600.519,SOS:571.35,SRD:35.467,SSP:4439.44,STN:23.411,SVC:8.75,SZL:18.39,TOP:2.389,TTD:6.786,TZS:2590.845,UGX:3671.572,UYU:43.13,VES:63.127,VUV:122.742,WST:2.806,XCD:2.7,XPF:114.029,YER:247.31,ZMW:28.266,IRR:41973.684,SYP:13031.046},C="0123456789ABCDEFGHJKMNPQRSTVWXYZ",I=32,P=10,S=0xffffffffffff;!function(e){e.Base32IncorrectEncoding="B32_ENC_INVALID",e.DecodeTimeInvalidCharacter="DEC_TIME_CHAR",e.DecodeTimeValueMalformed="DEC_TIME_MALFORMED",e.EncodeTimeNegative="ENC_TIME_NEG",e.EncodeTimeSizeExceeded="ENC_TIME_SIZE_EXCEED",e.EncodeTimeValueMalformed="ENC_TIME_MALFORMED",e.PRNGDetectFailure="PRNG_DETECT",e.ULIDInvalid="ULID_INVALID",e.Unexpected="UNEXPECTED",e.UUIDInvalid="UUID_INVALID"}(g||(g={}));var E=function(e){function r(e,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(i=t(this,r,["".concat(n," (").concat(e,")")])).name="ULIDError",i.code=e,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(r,e),n=r,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(s(Error));function T(e){var t=Math.floor(e()*I);return t===I&&(t=I-1),C.charAt(t)}function x(e){var t=function(){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;if("undefined"!=typeof globalThis)return globalThis;return null}(),r=t&&(t.crypto||t.msCrypto)||null;if("function"==typeof(null==r?void 0:r.getRandomValues))return function(){var e=new Uint8Array(1);return r.getRandomValues(e),e[0]/255};if("function"==typeof(null==r?void 0:r.randomBytes))return function(){return r.randomBytes(1).readUInt8()/255};throw new E(g.PRNGDetectFailure,"Failed to find a reliable PRNG")}function N(e,t){var r=x();return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P;if(isNaN(e))throw new E(g.EncodeTimeValueMalformed,"Time must be a number: ".concat(e));if(e>S)throw new E(g.EncodeTimeSizeExceeded,"Cannot encode a time larger than ".concat(S,": ").concat(e));if(e<0)throw new E(g.EncodeTimeNegative,"Time must be positive: ".concat(e));if(!1===Number.isInteger(e))throw new E(g.EncodeTimeValueMalformed,"Time must be an integer: ".concat(e));for(var r,n="",i=t;i>0;i--)r=e%I,n=C.charAt(r)+n,e=(e-r)/I;return n}(Date.now(),P)+function(e,t){for(var r="";e>0;e--)r=T(t)+r;return r}(16,r)}var A=function(){return"undefined"!=typeof window&&"undefined"!=typeof document&&(window!==window.parent&&/\/web-pixel(.*)\/sandbox\//.test(document.location.href))},D=function(e,t,r){if(t===r)return e;return k[t]&&k[r]?e/k[t]*k[r]:0},O=function(e){return"object"===o(e)&&null!=e},L=function(e,t){var r,n;if(e===t)return!0;if(!O(e)||!O(t))return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;try{for(var s=l(i),a=s.next();!a.done;a=s.next()){var c=a.value;if(!o.includes(c)||!L(e[c],t[c]))return!1}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return!0},q=function(){function e(e){var t=this;this.detectBot=function(){return!!t.browser.navigator.userAgent.toLowerCase().match(/bot|crawler|spider|robot|crawling|facebookexternalhit|remotasks/)},this.detectInternalUser=function(){return p(t,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return new URLSearchParams(window.location.search).get("internalUser")?[4,this.browser.setCookie("__cvg_internal_user","1",1051200)]:[3,2];case 1:case 4:return e.sent(),[2,!0];case 2:return[4,this.browser.getCookie("__cvg_internal_user")];case 3:return e.sent()?[4,this.browser.setCookie("__cvg_internal_user","1",1051200)]:[3,5];case 5:return[2,!1]}}))}))},this.getURLParameterByName=function(e){return new URLSearchParams(t.browser.window.location.search).get(e)},this.UID_COOKIE="__cvg_uid",this.setUid=function(){return p(t,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return[4,this.browser.getCookie(this.UID_COOKIE)];case 1:return e=t.sent()||this.getURLParameterByName(this.UID_COOKIE)||N(),[4,this.browser.setCookie(this.UID_COOKIE,e,1051200)];case 2:return t.sent(),[2,e]}}))}))},this.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t.browser.navigator.userAgent)},this.addScript=function(e,t){var r=t||{},n=r.id,i=r.sync,o=r.onLoad;if("undefined"!=typeof document){if(n){var s=document.getElementById(n);if(s)return s}if(!(null==t?void 0:t.allowDuplicateSrc))for(var a=document.getElementsByTagName("script"),c=0;c<a.length;c++)if(a[c].src===e)return a[c];var u=document.createElement("script");u.async=!i,u.src=e,n&&(u.id=n),o&&(u.onload=o);var d=document.getElementsByTagName("script")[0];return d&&d.parentNode?d.parentNode.insertBefore(u,d):document.head.appendChild(u),u}},this.browser=e}return e.prototype.randomDigits=function(e){return crypto.getRandomValues(new Uint8Array(e)).map((function(e){return e%10})).join("")},e}();function $(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}function U(e){setTimeout(e,0)}function R(e){try{return JSON.parse(decodeURIComponent(window.atob(e)))}catch(e){return}}var M=function(e,t,r){return p(void 0,void 0,void 0,(function(){var n;return h(this,(function(i){switch(i.label){case 0:if(!r)return[2];if(e instanceof w)return[2];n={url:null==t?void 0:t.window.location.href,referrer:null==t?void 0:t.document.referrer,public_token:r,user_agent:null==t?void 0:t.navigator.userAgent},O(e)&&(n=u(u({},n),{error:e.toString(),error_name:"name"in e?e.name:void 0,error_message:"message"in e?e.message:void 0,error_filename:"filename"in e?e.filename:void 0,error_lineno:"lineno"in e?e.lineno:void 0,error_colno:"colno"in e?e.colno:void 0,error_stack:"stack"in e?e.stack:void 0})),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,fetch("".concat(_(),"/error?public_token=").concat(r),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),keepalive:!0})];case 2:case 3:return i.sent(),[3,4];case 4:return[2]}}))}))},V=function(){function e(e){var t=e.pixel,r=e.config,n=e.consentManager;this.pixel=t,this.consentManager=n,this.utils=t.utils,this.browser=t.browser,this.logger=t.logger,this.config=r}return e.create=function(e){return new this(e)},e.prototype.setup=function(){return p(this,void 0,void 0,(function(){return h(this,(function(e){return[2]}))}))},e}(),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.create=function(e){if(e.config.enable_criteo)return new this(e)},t.prototype.setupGum=function(){var e=this;"undefined"!=typeof window&&"undefined"!=typeof document&&$((function(){window.__cvg_criteo_gum_func=function(t){var r=t.userid;r&&e.pixel.setProperty("$criteo_id",r)};var t=document.createElement("script");t.src="https://gum.criteo.com/sync?c=".concat("644","&a=1&r=2&j=__cvg_criteo_gum_func"),document.body.appendChild(t)}))},t.prototype.setup=function(){return p(this,void 0,void 0,(function(){return h(this,(function(e){return this.setupGum(),[2]}))}))},t}(V),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.getFbcFromURL=function(){var e=this.utils.getURLParameterByName("fbclid");return e?"fb.1.".concat((new Date).getTime(),".").concat(e):""},t.prototype.setupFbp=function(){return p(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return[4,this.browser.getCookie("_fbp")];case 1:return(e=t.sent())?[3,3]:(e="fb.1.".concat((new Date).getTime(),".").concat(this.utils.randomDigits(10)),[4,this.browser.setCookie("_fbp",e,1051200)]);case 2:t.sent(),t.label=3;case 3:return this.pixel.setProperty("$fbp",e),[2]}}))}))},t.prototype.setupFbc=function(){return p(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return(e=this.getFbcFromURL())?[3,2]:[4,this.browser.getCookie("_fbc")];case 1:return e=t.sent(),[3,4];case 2:return[4,this.browser.setCookie("_fbc",e,1051200)];case 3:t.sent(),t.label=4;case 4:return e&&this.pixel.setProperty("$fbc",e),[2]}}))}))},t.prototype.setup=function(){return p(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.setupFbp()];case 1:return e.sent(),[4,this.setupFbc()];case 2:return e.sent(),[2]}}))}))},t}(V),G=/^GA1\.\d\.\d+\.\d+$/,W=/^GS1\.\d\.\d+\.\d+\.\d+\.\d+\.\d+\.\d+\.\d+$/,B=/^GS2\.\d\.s\d+\$o\d+\$g\d+\$t\d+\$j\d+\$l\d+\$h\d+(?:\$[\w\-_]+)?$/,K=["deleted"],H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setClientId=function(){return p(this,void 0,void 0,(function(){var e,t;return h(this,(function(r){switch(r.label){case 0:return[4,this.browser.getCookie("_ga")];case 1:return!(e=r.sent())||K.includes(e)||(e.startsWith("GA1")&&(t=e.split(".").slice(2).join("."))&&this.pixel.setProperty("$ga4_client_id",t),G.test(e)||M(new Error("Invalid GA4 client ID with value: ".concat(e)),this.browser,this.pixel.publicToken)),[2]}}))}))},t.prototype.setSessionIds=function(){return p(this,void 0,void 0,(function(){var e,t,r,n,i,o,s,a,c,u,d,p,f,v,g;return h(this,(function(h){for(e=/(^| )_ga_([A-Z0-9]+)=([^;]+)/g;null!==(t=e.exec(document.cookie));)if(r=t[2],(n=t[3])&&!K.includes(n)){if(n.startsWith("GS1"))s=n.split("."),i=s[2],o=s[3],i&&this.pixel.setProperty("$ga4_session_id_".concat(r),i),o&&this.pixel.setProperty("$ga4_session_number_".concat(r),o);else if(n.startsWith("GS2")){s=(null===(g=n.split(".")[2])||void 0===g?void 0:g.split("$"))||[];try{for(f=void 0,a=l(s),c=a.next();!c.done;c=a.next())u=c.value,d=u.charAt(0),p=u.slice(1),"s"===d&&this.pixel.setProperty("$ga4_session_id_".concat(r),p),"o"===d&&this.pixel.setProperty("$ga4_session_number_".concat(r),p)}catch(e){f={error:e}}finally{try{c&&!c.done&&(v=a.return)&&v.call(a)}finally{if(f)throw f.error}}}W.test(n)||B.test(n)||M(new Error("Invalid GA4 session ID with value: ".concat(n)),this.browser,this.pixel.publicToken)}return[2]}))}))},t.prototype.setup=function(){return p(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return"undefined"==typeof window?[2]:[4,this.setClientId()];case 1:return e.sent(),[4,this.setSessionIds()];case 2:return e.sent(),[2]}}))}))},t}(V),Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.getKxFromCookie=function(){return p(this,void 0,void 0,(function(){var e,t,r;return h(this,(function(n){switch(n.label){case 0:return[4,this.browser.getCookie("__kla_id")];case 1:e=n.sent();try{return 0===(t=atob(e)).length?[2,!1]:[2,null==(r=JSON.parse(t))?void 0:r.$exchange_id]}catch(e){this.logger.error("Could not decode klaID",e)}return[2]}}))}))},t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e,t=this;return h(this,(function(r){switch(r.label){case 0:return(e=this.utils.getURLParameterByName("_kx"))&&""!==e?[3,2]:[4,this.getKxFromCookie()];case 1:e=r.sent(),r.label=2;case 2:return e&&e.length>0&&this.pixel.setProperty("$klaviyo_exchange_id",e),window.addEventListener("klaviyoForms",(function(e){var r,n,i,o,s,a,c,d,p,h,l,f,v,g,m,y,_,w=e;"submit"==(null===(r=w.detail)||void 0===r?void 0:r.type)&&((null===(i=null===(n=w.detail)||void 0===n?void 0:n.metaData)||void 0===i?void 0:i.$email)&&t.pixel.addAlias("urn:email:".concat(null===(o=w.detail.metaData)||void 0===o?void 0:o.$email)),t.pixel.track({method:"track",eventName:"Subscribed To Newsletter",profileProperties:{$email:null===(a=null===(s=w.detail)||void 0===s?void 0:s.metaData)||void 0===a?void 0:a.$email,$first_name:null===(d=null===(c=w.detail)||void 0===c?void 0:c.metaData)||void 0===d?void 0:d.$first_name,$last_name:null===(h=null===(p=w.detail)||void 0===p?void 0:p.metaData)||void 0===h?void 0:h.$last_name,$phone_number:null===(f=null===(l=w.detail)||void 0===l?void 0:l.metaData)||void 0===f?void 0:f.$phone_number},properties:u({form:null===(g=null===(v=w.detail)||void 0===v?void 0:v.metaData)||void 0===g?void 0:g.$source,formId:null===(m=w.detail)||void 0===m?void 0:m.formId,companyId:null===(y=w.detail)||void 0===y?void 0:y.companyId},null===(_=w.detail)||void 0===_?void 0:_.metaData)}))})),[2]}}))}))},t}(V);function J(e){return function(t){e((function(e){if(c=e,Symbol.iterator in Object(c)){var r=f(e),n=r[0],i=r.slice(1);if("consent"!==n)return;var o=f(i),s=o[0],a=o.slice(1);("default"===s||"update"===s)&&t(s,a[0]||{})}var c}))}}var Z=function(){function e(e){var t=this;this.default={},this.updated={},this.current={},this.messages=[],this.subscribers=[],e((function(e,r){"default"===e?t.default=u({},r):t.updated=u(u({},t.updated),r),t.current=u(u({},t.default),t.updated);var n={cmd:e,props:r};t.messages.push(n),t.subscribers.forEach((function(e){return e(n)}))}))}return e.prototype.subscribe=function(e){this.messages.forEach((function(t){return e(t)})),this.subscribers.push(e)},e}(),Y="_cvgInternalDataLayer",z=J((function(e){window.dataLayer=window.dataLayer||[],window.dataLayer.forEach((function(t){return e(t)}));var t=window.dataLayer.push;window.dataLayer.push=function(){for(var r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return t.apply(window.dataLayer,n),e(n[0]),(null===(r=window.dataLayer)||void 0===r?void 0:r.length)||0}})),X=function(e){function t(){return e.call(this,z)||this}return c(t,e),t.prototype.toObj=function(){return{$google_consent:{current:this.current,default:this.default,updated:this.updated}}},t.prototype.parse=function(e){var t;return null===(t=JSON.parse(e))||void 0===t?void 0:t.$google_consent},t}(Z),ee=new X;var te,re,ne=function(){function e(e){this.dataLayerName=e.dataLayerName,this.gtmUrl=e.sgtm?"".concat(m(y(window.__cvg_proxy_static)||"https://static.runconverge.com"),"/js"):"https://www.googletagmanager.com/gtag/js",this.sgtm=!!e.sgtm,this.tagId=e.tagId,this.utils=e.utils,this.logger=e.logger}return e.prototype.mount=function(t){var r=this;if("undefined"!=typeof window){var n,i,o={dataLayerName:this.dataLayerName,sgtm:this.sgtm,config:t};if(e.mounted[this.tagId]){if(n=e.mounted[this.tagId],i=o,n.dataLayerName!==i.dataLayerName||n.sgtm!==i.sgtm||!L(n.config,i.config)){var s="Google tag ".concat(this.tagId," could not be loaded as its configuration is not compatible with an existing gtag, skipping loading");throw this.logger.warn(s,{existingMount:e.mounted[this.tagId],newMount:o}),new Error(s)}}else e.mounted[this.tagId]=o,"dataLayer"!==this.dataLayerName&&ee.subscribe((function(e){var t=e.cmd,n=e.props;return r.gtag("consent",t,n)})),this.utils.addScript("".concat(this.gtmUrl,"?id=").concat(this.tagId,"&l=").concat(this.dataLayerName),{id:"gtag-".concat(this.sgtm,"-").concat(this.dataLayerName,"-").concat(this.tagId)}),this.gtag("js",new Date),t?this.gtag("config",this.tagId,t):this.gtag("config",this.tagId)}},e.prototype.gtag=function(){var e;if("undefined"!=typeof window){var t=window;t[this.dataLayerName]=t[this.dataLayerName]||[];try{null===(e=t[this.dataLayerName])||void 0===e||e.push(arguments)}catch(e){this.logger.error("Could not push to dataLayer",e)}}},e.mounted={},e}();!function(e){e.EQ="=",e.GT=">",e.LT="<",e.GTE=">=",e.LTE="<=",e.NE="!=",e.INCLUDES="includes",e.NOT_INCLUDES="not_includes",e.CONTAINS="contains",e.DOES_NOT_CONTAIN="not_contains"}(te||(te={})),function(e){e.SUCCESS="success",e.BLOCKED="blocked",e.FILTERED="filtered"}(re||(re={}));var ie,oe=function(){function e(e){this.logger=e.logger,this.config=e.config.config,this.connection_id=e.config.connection_id,this.publicToken=e.publicToken,this.cookieUrn=e.cookieUrn,this.browser=e.browser}return e.prototype.logEvent=function(e){return p(this,void 0,void 0,(function(){var t,r;return h(this,(function(n){switch(n.label){case 0:this.logger.debug("[".concat(this.publicToken,"] [").concat(this.config.app," ID: ").concat(this.connection_id,"]"),e),t=u(u({},e),{connection_id:this.connection_id,app_profile_id:this.cookieUrn}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,fetch("".concat(_(),"/log?public_token=").concat(this.publicToken),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0})];case 2:return n.sent(),[3,4];case 3:r=n.sent(),M(r,this.browser,this.publicToken);try{this.logger.error("Error logging event",r)}catch(e){}return[3,4];case 4:return[2]}}))}))},e}(),se=function(){function e(e,t){var r,n;this.pixel=e.pixel,this.browser=e.browser,this.utils=e.utils,this.logger=e.logger,this.eventLogger=e.connectionEventLogger,this.config=e.config,this.connectionId=e.connection_id,this.eventName=t.eventName,this.properties=t.properties,this.profileProperties=t.profileProperties,this.eventID=t.eventID,this.eventMappings=null!==(r=e.event_mappings)&&void 0!==r?r:[],this.filters=null!==(n=e.filters)&&void 0!==n?n:[],this.version=e.version}return e.setup=function(e){},e.prototype.forward=function(){},e.prototype.forwardV2=function(){var e,t,r,n=this;if(null===(r=this.eventMappings)||void 0===r?void 0:r.length)if(this.shouldForward()){var i=this.eventMappings.filter((function(e){return"*"===e.event_name||e.event_name===n.eventName}));try{for(var o=l(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{this.forwardWithMapping(a)}catch(e){this.logger.error("Failed to forward event",this.eventName,a)}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}}else this.logEvent({forwardedEventName:"",status:re.FILTERED})},e.prototype.forwardWithMapping=function(e){},e.prototype.setForwardedProfileProperties=function(e){this.forwardedProfileProperties=u(u({},this.forwardedProfileProperties),e)},e.prototype.logEvent=function(e){return p(this,void 0,void 0,(function(){var t;return h(this,(function(r){switch(r.label){case 0:return t={event_name:this.eventName,event_properties:this.properties,profile_properties:this.profileProperties,event_id:this.eventID,pixel_method:e.method||"forward",forwarded_event_name:e.forwardedEventName,forwarded_event_id:e.forwardedEventID,forwarded_event_properties:e.forwardedProperties,forwarded_profile_properties:e.forwardedProfileProperties||this.forwardedProfileProperties,event_mapping_id:e.eventMappingId,status:e.status},[4,this.eventLogger.logEvent(t)];case 1:return r.sent(),[2]}}))}))},e.prototype.getConversionAmount=function(e){var t,r,n,i;if(!("conversion_amount"in this.config))return Number(e.total_price);switch(this.config.conversion_amount){case"net_after_tax":return Number(e.total_price)-Number(null!==(t=e.total_tax)&&void 0!==t?t:0);case"net_after_shipping":return Number(e.total_price)-Number(null!==(r=e.total_shipping)&&void 0!==r?r:0);case"net":case"net_after_tax_and_shipping":return Number(e.total_price)-Number(null!==(n=e.total_tax)&&void 0!==n?n:0)-Number(null!==(i=e.total_shipping)&&void 0!==i?i:0);default:return Number(e.total_price)}},e.prototype.tryGetConversionAmount=function(e){if(O(e))return"total_price"in e?this.getConversionAmount(e):"price"in e?Number(e.price):void 0},e.prototype.shouldForward=function(){var e,t,r=this;try{for(var n=l(this.filters),i=n.next();!i.done;i=n.next()){var o=i.value;if(o.event_name===this.eventName&&!o.or_filters.some((function(e){return r.matches(e)})))return!1}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return!0},e.prototype.matches=function(e){var t,r=null===(t=this.properties)||void 0===t?void 0:t[e.property];switch(e.operator){case te.EQ:return r===e.value;case te.NE:return r!==e.value;case te.CONTAINS:return"string"==typeof r&&"string"==typeof e.value&&r.includes(e.value);case te.DOES_NOT_CONTAIN:return"string"==typeof r&&"string"==typeof e.value&&!r.includes(e.value);case te.GT:return"number"==typeof r&&"number"==typeof e.value&&r>e.value;case te.LT:return"number"==typeof r&&"number"==typeof e.value&&r<e.value;case te.GTE:return"number"==typeof r&&"number"==typeof e.value&&r>=e.value;case te.LTE:return"number"==typeof r&&"number"==typeof e.value&&r<=e.value;case te.INCLUDES:if(Array.isArray(r)&&Array.isArray(e.value)){var n=r.map(String);return e.value.map(String).every((function(e){return n.includes(e)}))}return!1;case te.NOT_INCLUDES:if(Array.isArray(r)&&Array.isArray(e.value)){var i=r.map(String);return!e.value.map(String).some((function(e){return i.includes(e)}))}return!1;default:throw new Error("Unknown operator: ".concat(e.operator))}},e}();!function(e){e.AppLovin="applovin",e.Awin="awin",e.Bing="bing",e.Convert="convert",e.Criteo="criteo",e.CustomHtml="custom_html",e.Dummy="dummy",e.Facebook="fb",e.GA4="ga4",e.GoogleAds="google_ads",e.GoogleAdsConversions="google_ads_conversions",e.GoogleAdsRemarketing="google_ads_remarketing",e.Klaviyo="klaviyo",e.Pinterest="pinterest",e.Reddit="reddit",e.Snapchat="snapchat",e.TikTok="tiktok",e.Twitter="twitter"}(ie||(ie={}));var ae=J((function(e){window.uetq=window.uetq||[];for(var t=0;t<window.uetq.length;t++)if("consent"===window.uetq[t]){var r=f(window.uetq.slice(t),3),n=r[0],i=r[1],o=r[2];e([n,i,o])}var s=window.uetq.push;window.uetq.push=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return s.apply(window.uetq,r),e(r),(null===(t=window.uetq)||void 0===t?void 0:t.length)||0}})),ce=function(e){function t(){return e.call(this,ae)||this}return c(t,e),t.prototype.toObj=function(){return{$bing_consent:{current:this.current,default:this.default,updated:this.updated}}},t.prototype.parse=function(e){var t;return null===(t=JSON.parse(e))||void 0===t?void 0:t.$bing_consent},t}(Z),ue=new ce,de=function(){function e(e){this.uetq=[];var t=e.config;this.tagId=t.tag_id,this.utils=e.utils,this.logger=e.logger}return e.prototype.mount=function(){var e=this;if("undefined"!=typeof window){ue.subscribe((function(t){var r=t.cmd,n=t.props;return e.pushToUetq("consent",r,n)})),this.setupUET(this.tagId);var t=this;this.utils.addScript("https://bat.bing.com/bat.js",{id:"cvg-bing",onLoad:function(){for(var e in window._cvg_uetqs||{})t.setupUET(e)},allowDuplicateSrc:!0})}},e.prototype.setupUET=function(e){window._cvg_uetqs=window._cvg_uetqs||{},window._cvg_uetqs[e]=window._cvg_uetqs[e]||[];var t=window._cvg_uetqs[e];window.UET&&!t.hasOwnProperty("domain")&&(window._cvg_uetqs[e]=new window.UET({ti:e,q:window._cvg_uetqs[e]})).push("pageLoad")},e.prototype.pushToUetq=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("undefined"!=typeof window){window._cvg_uetqs=window._cvg_uetqs||{};var r=window._cvg_uetqs[this.tagId]=window._cvg_uetqs[this.tagId]||[];r.push.apply(r,v([],f(e),!1))}},e}(),pe=function(e){function t(t,r){var n=e.call(this,t,r)||this,i=t.config;n.itemIdType=i.item_id_type||"product_id",n.customEvents=i.custom_bing_events||[];var o=new de(t);return n.pushToUetq=o.pushToUetq.bind(o),n}return c(t,e),t.setup=function(e){new de(e).mount()},t.prototype.send=function(e,t,r){var n=this.getEnhancedConversionsProperties();this.pushToUetq("event",e,u(u(u({},t),n),{transaction_id:this.eventID})),this.logEvent({forwardedEventName:e,forwardedProperties:t,forwardedProfileProperties:n,forwardedEventID:this.eventID,method:"event",eventMappingId:r})},t.prototype.forward=function(){var e=this.eventName,t=this.properties;switch(e){case"$page_load":this.send("page_view",{ecomm_pagetype:"/"===this.browser.window.location.pathname?"home":void 0,page_path:this.browser.window.location.pathname,page_title:this.browser.document.title});break;case"Viewed Product":this.send("view_item",this.parseProduct(t));break;case"Viewed Collection":this.send("view_item_list",this.parseCollection(t));break;case"Added To Cart":this.send("add_to_cart",this.parseProduct(t,"cart"));break;case"Searched":this.send("view_search_results",{search_term:t.query});break;case"Started Checkout":this.send("begin_checkout",this.parseCheckout(t));break;case"Added Payment Info":this.send("add_payment_info",this.parseCheckout(t));break;case"Placed Order":this.send("purchase",this.parseCheckout(t,!0))}this.fireCustomEvents()},t.prototype.forwardWithMapping=function(e){var t=void 0;switch(this.eventName){case"$page_load":t={ecomm_pagetype:"/"===this.browser.window.location.pathname?"home":void 0,page_path:this.browser.window.location.pathname,page_title:this.browser.document.title};break;case"Viewed Product":t=this.parseProduct(this.properties);break;case"Viewed Collection":t=this.parseCollection(this.properties);break;case"Added To Cart":t=this.parseProduct(this.properties,"cart");break;case"Searched":t={search_term:this.properties.query};break;case"Started Checkout":case"Added Payment Info":t=this.parseCheckout(this.properties);break;case"Placed Order":t=this.parseCheckout(this.properties,!0);break;default:t={}}this.send(e.destination_event_name,t||{},e.id)},t.prototype.parseCollection=function(e){var t;return{ecomm_prodid:this.getEcommProdid(e.items),ecomm_pagetype:"category",items:null===(t=e.items)||void 0===t?void 0:t.map(this.parseItem.bind(this))}},t.prototype.parseProduct=function(e,t){void 0===t&&(t="product");var r=u({quantity:1},e).quantity,n=(e.price||0)*r;return{ecomm_prodid:this.getEcommProdid([e]),ecomm_pagetype:t,ecomm_totalvalue:n,revenue_value:n,currency:e.currency,items:[this.parseItem(e)]}},t.prototype.fireCustomEvents=function(){var e,t;try{for(var r=l(this.customEvents),n=r.next();!n.done;n=r.next()){var i=n.value;this.eventName===i.event_name&&this.send(i.bing_event_name,{})}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.getItemId=function(e){if("product_id"===this.itemIdType)return e.product_id;if("variant_id"===this.itemIdType)return e.variant_id;if("sku"===this.itemIdType)return e.sku;throw new Error("Invalid item_id_type ".concat(this.itemIdType))},t.prototype.parseItem=function(e){return{id:this.getItemId(e),quantity:u({quantity:1},e).quantity,price:e.price}},t.prototype.parseCheckout=function(e,t){var r,n=this.getConversionAmount(e);return{ecomm_prodid:this.getEcommProdid(e.items),ecomm_totalvalue:n,ecomm_pagetype:t?"purchase":"cart",revenue_value:n,currency:e.currency,items:null===(r=e.items)||void 0===r?void 0:r.map(this.parseItem.bind(this))}},t.prototype.getEcommProdid=function(e){var t=null==e?void 0:e.map(this.getItemId.bind(this)).filter((function(e){return e&&e.length>0}));return t&&t.length>0?t:void 0},t.prototype.getEnhancedConversionsProperties=function(){var e=this.profileProperties,t=e.$email,r=e.$phone_number;return t||r?{pid:{em:t,ph:r}}:{}},t}(se),he=function(e){return"urn:email:".concat(e)},le=function(e,t){return t&&"urn:shopify:".concat(t,":customer_id:").concat(e)},fe=function(){function e(e){this.consentState=e}return e.prototype.subscribeToConsent=function(){this.consentState.subscribe(this.updateConsentStorage.bind(this))},e.prototype.pollConsent=function(){var e=this.readConsentStorage();(null==e?void 0:e.default)&&Object.keys(e.default)&&!L(null==e?void 0:e.default,this.registeredDefaultConsent)&&(this.pushToQueue("consent","default",null==e?void 0:e.default),this.registeredDefaultConsent=null==e?void 0:e.default),(null==e?void 0:e.updated)&&Object.keys(e.updated)&&!L(null==e?void 0:e.updated,this.registeredUpdatedConsent)&&(this.pushToQueue("consent","update",null==e?void 0:e.updated),this.registeredUpdatedConsent=null==e?void 0:e.updated)},e.prototype.updateConsentStorage=function(){if("undefined"!=typeof localStorage){var e=JSON.stringify(this.consentState.toObj());localStorage.setItem(this.localStorageKey,e)}},e.prototype.readConsentStorage=function(){if("undefined"!=typeof localStorage){var e=localStorage.getItem(this.localStorageKey)||"{}";try{var t=e?this.consentState.parse(e):void 0;return{default:null==t?void 0:t.default,updated:null==t?void 0:t.updated}}catch(e){return{}}}},e}(),ve=function(e){function t(){var t=e.call(this,ee)||this;return t.localStorageKey="__cvg-shopify-sandbox-google-consent__",t}return c(t,e),t.prototype.pushToQueue=function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push(arguments)},t}(fe),ge=function(e){function t(){var t=e.call(this,ue)||this;return t.localStorageKey="__cvg-shopify-sandbox-bing-consent__",t}return c(t,e),t.prototype.pushToQueue=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window._cvg_uetqs=window._cvg_uetqs||{},Object.values(window._cvg_uetqs).forEach((function(t){return t.push.apply(t,v([],f(e),!1))}))},t}(fe),me=function(){function e(){this.gtagRelay=new ve,this.bingRelay=new ge,A()?this.watchConsentStorage():(this.gtagRelay.subscribeToConsent(),this.bingRelay.subscribeToConsent())}return e.prototype.watchConsentStorage=function(){return p(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:try{this.gtagRelay.pollConsent()}catch(e){}try{this.bingRelay.pollConsent()}catch(e){}return[4,(t=200,new Promise((function(e){return setTimeout(e,t)})))];case 1:return e.sent(),[3,0];case 2:return[2]}var t}))}))},e}(),ye=function(e){function t(t,r){var n=e.call(this,t)||this;return n.shopifySandboxConsentRelay=new me,n.shopName=r,n}return c(t,e),t.create=function(e){var r,n,i,o,s,a=e.config.shop_name;if(!a&&"undefined"!=typeof window){var c=(null===(r=window.Shopify)||void 0===r?void 0:r.shop)||(null===(s=null===(o=null===(i=null===(n=window.shopify)||void 0===n?void 0:n.init)||void 0===i?void 0:i.data)||void 0===o?void 0:o.shop)||void 0===s?void 0:s.myshopifyDomain);c&&(a=c.split(".")[0])}if(a)return new t(e,a)},t.prototype.parseLineItemCustom=function(e){var t,r,n;return e.variant?{product_id:null===(t=e.variant.product.id)||void 0===t?void 0:t.toString(),variant_id:null===(r=e.variant.id)||void 0===r?void 0:r.toString(),name:e.variant.product.untranslatedTitle||e.variant.product.title,price:e.variant.price.amount,discount:e.discountAllocations.reduce((function(e,t){return e+t.amount.amount}),0),url:"https://".concat(this.browser.document.location.hostname).concat(e.variant.product.url),image_url:this.processImageURL(null===(n=e.variant.image)||void 0===n?void 0:n.src),sku:e.variant.sku,variant_name:e.variant.untranslatedTitle||e.variant.title,currency:e.variant.price.currencyCode,vendor:e.variant.product.vendor,quantity:e.quantity}:{}},t.prototype.parseCheckoutCompletedCustom=function(e){var t,r,n,i,o,s,a,c=e.checkout;return{id:this.parseOrderIdCustom(e),items:v([],f(null!==(r=null===(t=c.lineItems)||void 0===t?void 0:t.map(this.parseLineItemCustom.bind(this)))&&void 0!==r?r:[]),!1),total_discount:null===(n=c.discountsAmount)||void 0===n?void 0:n.amount,total_price:null===(i=c.totalPrice)||void 0===i?void 0:i.amount,total_tax:c.totalTax.amount,total_shipping:null===(s=null===(o=c.shippingLine)||void 0===o?void 0:o.price)||void 0===s?void 0:s.amount,currency:null===(a=c.totalPrice)||void 0===a?void 0:a.currencyCode,coupon:c.discountApplications.map((function(e){return e.title}))}},t.prototype.parseCheckoutStartedCustom=function(e){return this.parseCheckoutCompletedCustom(e)},t.prototype.parseAddedContactInfoCustom=function(e){return this.parseCheckoutCompletedCustom(e)},t.prototype.parseAddedShippingInfoCustom=function(e){return this.parseCheckoutCompletedCustom(e)},t.prototype.parseCollectionViewedCustom=function(e){var t=e.collection;return{id:t.id,name:t.title,items:[]}},t.prototype.parsePaymentInfoSubmittedCustom=function(e){return this.parseCheckoutCompletedCustom(e)},t.prototype.processImageURL=function(e){if(e){return e.replace(/^(.*)_([0-9]{1,2}x[0-9]{1,2})\.(jpg|jpeg|png|gif)(.*)$/,"$1_512x512.$3$4")}},t.prototype.parseProductAddedToCartCustom=function(e){var t,r,n,i=e.cartLine,o=i.merchandise,s=this.browser.document.location,a=s.protocol,c=s.hostname;return{product_id:null===(t=o.product.id)||void 0===t?void 0:t.toString(),variant_id:null===(r=o.id)||void 0===r?void 0:r.toString(),name:o.product.untranslatedTitle||o.product.title,price:i.cost.totalAmount.amount,url:"".concat(a,"//").concat(c).concat(o.product.url),image_url:null===(n=o.image)||void 0===n?void 0:n.src,sku:o.sku,variant_name:o.untranslatedTitle||o.title,currency:i.cost.totalAmount.currencyCode,vendor:o.product.vendor,quantity:i.quantity}},t.prototype.parseProfilePropertiesCustom=function(e){var t,r,n,i,o,s,a;if(!e||!("checkout"in e))return{};var c=e.checkout;return c?{$email:c.email||void 0,$phone_number:c.phone||(null===(t=c.shippingAddress)||void 0===t?void 0:t.phone)||void 0,$first_name:(null===(r=c.shippingAddress)||void 0===r?void 0:r.firstName)||void 0,$last_name:(null===(n=c.shippingAddress)||void 0===n?void 0:n.lastName)||void 0,$city:(null===(i=c.shippingAddress)||void 0===i?void 0:i.city)||void 0,$country_code:(null===(o=c.shippingAddress)||void 0===o?void 0:o.countryCode)||void 0,$state:(null===(s=c.shippingAddress)||void 0===s?void 0:s.province)||void 0,$zip_code:(null===(a=c.shippingAddress)||void 0===a?void 0:a.zip)||void 0}:{}},t.prototype.parseOrderIdCustom=function(e){var t,r;if(e&&"checkout"in e){var n=null===(r=null===(t=e.checkout)||void 0===t?void 0:t.order)||void 0===r?void 0:r.id;if(n)return n.startsWith("gid://shopify")&&(n=n.split("/").pop()),n.length>0?n:void 0}},t.prototype.parseViewedProduct=function(e){var t,r,n=e.variant,i=(null===(r=null===(t=window.Shopify)||void 0===t?void 0:t.currency)||void 0===r?void 0:r.active)||e.currency,o=e.product;return this.parseProduct(o,n,i)},t.prototype.parseProduct=function(e,t,r){var n,i=this.browser.document.location.hostname,o=e.featured_image||(null===(n=e.images)||void 0===n?void 0:n[0]);return{product_id:e.id.toString(),variant_id:t.id,name:e.untranslatedTitle||e.title,price:t.price/100,url:"https://".concat(i,"/products/").concat(e.handle),image_url:o?"https:".concat(o):void 0,sku:t.sku,variant_name:t.untranslatedTitle||t.title,currency:r,vendor:e.vendor}},t.prototype.parseViewedCollection=function(e){var t,r,n,i,o,s=e.collection,a=(null===(i=null===(n=window.Shopify)||void 0===n?void 0:n.currency)||void 0===i?void 0:i.active)||e.currency,c=[];try{for(var u=l(null!==(o=s.products)&&void 0!==o?o:[]),d=u.next();!d.done;d=u.next()){var p=d.value,h=p.variants[0];h&&c.push(this.parseProduct(p,h,a))}}catch(e){t={error:e}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}var f=this.browser.document.location.hostname;return{id:s.id,name:s.title,description:s.description,image_url:s.featured_image?"https:".concat(s.featured_image):void 0,url:"https://".concat(f,"/collections/").concat(s.handle),items:c.slice(0,8)}},t.prototype.parseSearched=function(e){return{query:e.search}},t.prototype.initCustomer=function(){var e,t,r;if("undefined"!=typeof window){var n=null===(r=null===(t=null===(e=window.shopify)||void 0===e?void 0:e.init)||void 0===t?void 0:t.data)||void 0===r?void 0:r.customer;if(n){var i=n.email;i&&(this.pixel.addAlias(he(i)),this.pixel.setProperty("$email",i));var o=n.id;o&&this.shopName&&(this.pixel.addAlias(le(o,this.shopName)),this.pixel.setProperty("$customer_id",o));var s=n.phone;s&&this.pixel.setProperty("$phone_number",s)}}},t.prototype.trackLoggedIn=function(e){return p(this,void 0,void 0,(function(){var t,r,n,i;return h(this,(function(o){switch(o.label){case 0:return t="__cvg_shopify_logged_in",r=34560,e?[3,2]:[4,this.browser.getCookie(t)];case 1:return[2,o.sent()];case 2:return n=e.toString(),[4,this.browser.getCookie(t)];case 3:return i=o.sent(),[4,this.browser.setCookie(t,n,r)];case 4:return o.sent(),n!==i&&this.pixel.track({method:"track",eventName:"Logged In"}),[2,n]}}))}))},t.prototype.getCheckoutTokens=function(){return p(this,void 0,void 0,(function(){var e,t,r,n;return h(this,(function(i){switch(i.label){case 0:return[4,this.browser.getCookie("checkout_session_lookup")];case 1:if(!(e=i.sent()))return[2,[]];try{return(t=JSON.parse(decodeURIComponent(e)))&&t.keys?[2,v(v([],f((r=null!==(n=t.keys)&&void 0!==n?n:[]).map((function(e){return e.source_id}))),!1),f(r.map((function(e){return e.checkout_session_identifier}))),!1).filter((function(e){return!!e}))]:[2,[]]}catch(e){return this.logger.error("Failed to parse checkout_session_lookup cookie",e),[2,[]]}return[2]}}))}))},t.prototype.onWebPixelEvent=function(e){return p(this,void 0,void 0,(function(){var t,r,n,i,o;return h(this,(function(s){var a,c;return this.logger.debug("Shopify sandbox event",e),e.data&&this.pixel.setProperties(this.parseProfilePropertiesCustom(e.data)),e.data&&"checkout"in e.data&&((null===(n=null===(r=e.data)||void 0===r?void 0:r.checkout)||void 0===n?void 0:n.email)&&this.pixel.addAlias(he(e.data.checkout.email)),(null===(o=null===(i=e.data)||void 0===i?void 0:i.checkout)||void 0===o?void 0:o.token)&&this.pixel.addAlias("urn:shopify:checkout_token:".concat(e.data.checkout.token))),(t=this.parseOrderIdCustom(e.data))&&t.length>0&&this.shopName&&this.pixel.addAlias((a=t,(c=this.shopName)&&"urn:shopify:".concat(c,":order_id:").concat(a))),"checkout_completed"===e.name?this.pixel.forward({method:"forward",eventName:"Placed Order",properties:this.parseCheckoutCompletedCustom(e.data),eventID:t}):"checkout_started"===e.name?this.pixel.track({method:"track",eventName:"Started Checkout",properties:this.parseCheckoutStartedCustom(e.data)}):"checkout_address_info_submitted"===e.name?this.pixel.track({method:"track",eventName:"Added Contact Info",properties:this.parseAddedContactInfoCustom(e.data)}):"checkout_shipping_info_submitted"===e.name?this.pixel.track({method:"track",eventName:"Added Shipping Info",properties:this.parseAddedShippingInfoCustom(e.data)}):"payment_info_submitted"===e.name?this.pixel.track({method:"track",eventName:"Added Payment Info",properties:this.parsePaymentInfoSubmittedCustom(e.data)}):"product_added_to_cart"===e.name&&this.pixel.track({method:"track",eventName:"Added To Cart",properties:this.parseProductAddedToCartCustom(e.data)}),[2]}))}))},t.prototype.getCartToken=function(){return p(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return[4,this.browser.getCookie("cart")];case 1:return(e=t.sent())?[2,decodeURIComponent(e).split("?")[0]]:[2]}}))}))},t.prototype.getShopifyYCookie=function(){return p(this,void 0,void 0,(function(){var e,t;return h(this,(function(r){switch(r.label){case 0:return[4,this.browser.getCookie("_shopify_y")];case 1:return e=r.sent(),[4,this.browser.getCookie("_y")];case 2:return t=r.sent(),[2,e||t]}}))}))},t.prototype.atcRecordId=function(e,t){return p(this,void 0,void 0,(function(){var r,n;return h(this,(function(i){switch(i.label){case 0:return r="".concat(e.slice(0,e.length-7),"00"),[4,this.getCartToken()];case 1:return n=i.sent(),[2,"".concat(r,":").concat(n,":").concat(t)]}}))}))},t.prototype.getCustomerId=function(){var e,t,r,n,i;if("undefined"!=typeof window)return(null===(r=null===(t=null===(e=window.ShopifyAnalytics)||void 0===e?void 0:e.meta)||void 0===t?void 0:t.page)||void 0===r?void 0:r.customerId)||(null===(i=null===(n=window.meta)||void 0===n?void 0:n.page)||void 0===i?void 0:i.customerId)},t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e,t,r,n,i,o,s,a,c,u,d=this;return h(this,(function(p){switch(p.label){case 0:return[4,this.getCartToken()];case 1:return(e=p.sent())&&this.pixel.addAlias("urn:shopify:cart_token:".concat(e)),[4,this.getShopifyYCookie()];case 2:return(t=p.sent())&&this.pixel.addAlias("urn:shopify:shopify_y:".concat(t)),[4,this.getCheckoutTokens()];case 3:return p.sent().forEach((function(e){d.pixel.addAlias("urn:shopify:checkout_token:".concat(e))})),r="undefined"!=typeof window&&window.__cvg_shopify_info,n=null===(a=this.getCustomerId())||void 0===a?void 0:a.toString(),[4,this.trackLoggedIn(n)];case 4:return(n=p.sent())&&n.length>0&&this.shopName&&(this.pixel.addAlias(le(n,this.shopName)),this.pixel.setProperty("$customer_id",n)),r&&(r.variant&&(i=this.parseViewedProduct(r),U((function(){return d.pixel.track({method:"track",eventName:"Viewed Product",properties:i})}))),(null===(c=r.collection)||void 0===c?void 0:c.products)&&r.collection.id&&(o=this.parseViewedCollection(r),U((function(){return d.pixel.track({method:"track",eventName:"Viewed Collection",properties:o})}))),r.search&&(s=this.parseSearched(r),U((function(){return d.pixel.track({method:"track",eventName:"Searched",properties:s})})))),"undefined"!=typeof window&&(null===(u=window.shopify)||void 0===u?void 0:u.analytics)&&window.shopify.analytics.subscribe("all_events",(function(e){try{d.onWebPixelEvent(e)}catch(e){d.logger.error("Failed to process Shopify event",e)}})),this.initCustomer(),[2]}}))}))},t}(V),_e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e,t;return h(this,(function(r){switch(r.label){case 0:return[4,this.browser.getCookie("_ttp")];case 1:return(e=r.sent())&&this.pixel.setProperty("$tiktok_ttp",e),[4,this.browser.getCookie("ttclid")];case 2:return(t=r.sent())?[3,4]:(t=this.utils.getURLParameterByName("ttclid")||"")?[4,this.browser.setCookie("ttclid",t,1051200)]:[3,4];case 3:r.sent(),r.label=4;case 4:return t&&this.pixel.setProperty("$tiktok_ttclid",t),[2]}}))}))},t}(V),we=["utm_source","utm_medium","utm_term","utm_content","utm_campaign","utm_source_platform","utm_creative_format","utm_marketing_tactic","cvg_source","cvg_adid","cvg_cid","tw_source","tw_adid","tw_campaign","fbadid","gadid","ttadid","scadid","padid"],be=v(v([],f(we),!1),["fbclid","gad_source","gclid","dclid","gbraid","gclsrc","wbraid","ttclid","epik","ScCid","tblcid","outbraincid","msclkid","rdt_cid","twclid","_kx","igshid","mc_cid","awc"],!1);var ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.getSessionId=function(){return p(this,void 0,void 0,(function(){var e,r;return h(this,(function(n){switch(n.label){case 0:return[4,this.browser.getCookie(t.SESSION_ID_COOKIE)];case 1:return(e=n.sent())?[2,e]:[4,this.getSessionData()];case 2:return[2,null==(r=n.sent())?void 0:r.sessionId]}}))}))},t.prototype.setSessionId=function(e){return p(this,void 0,void 0,(function(){return h(this,(function(r){switch(r.label){case 0:return[4,this.browser.setCookie(t.SESSION_ID_COOKIE,e,t.SESSION_DURATION)];case 1:return r.sent(),[2]}}))}))},t.prototype.getSessionData=function(){return p(this,void 0,void 0,(function(){var e,r;return h(this,(function(n){switch(n.label){case 0:return[4,this.browser.getCookie(t.SESSION_COOKIE)];case 1:if(!(e=n.sent()))return[2,void 0];if(e.startsWith("%")){try{return r=JSON.parse(decodeURI(e)),this.setSessionData(r),[2,r]}catch(e){}try{return r=JSON.parse(e),this.setSessionData(r),[2,r]}catch(e){}}return[2,R(e)]}}))}))},t.prototype.setSessionData=function(e){return p(this,void 0,void 0,(function(){var r;return h(this,(function(n){switch(n.label){case 0:return r=function(e){return window.btoa(encodeURIComponent(JSON.stringify(e)))}(e),[4,this.browser.setCookie(t.SESSION_COOKIE,r,t.SESSION_DURATION)];case 1:return n.sent(),[2]}}))}))},t.prototype.getCrossDomainSessionId=function(){return this.utils.getURLParameterByName(t.SESSION_ID_COOKIE)||void 0},t.prototype.buildUTMs=function(){var e,t,r={};try{for(var n=l(be),i=n.next();!i.done;i=n.next()){var o=i.value,s=this.utils.getURLParameterByName(o);s&&(r[o]=s)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}if(!(r.cvg_source||r.cvg_cid||r.cvg_adid)){var a=this.utils.getURLParameterByName("nbt");if(a){var c=f(a.split(":"),6),u=c[1],d=c[3],p=c[5];r.cvg_source="fb"===u?"facebook":"adwords"===u?"google":u,r.cvg_cid=d,r.cvg_adid=p}}return r},t.prototype.buildReferrer=function(){try{new URL(this.browser.window.location.href);var e=new URL(this.browser.document.referrer);return["".concat(e.protocol,"//").concat(e.hostname),"".concat(e.pathname).concat(e.search)]}catch(e){return["",""]}},t.prototype.setPixelSession=function(e,t){this.pixel.setSessionId(e),t&&this.pixel.setSessionProperties(u(u({},t.utm),{$session_trigger:t.trigger,$url:t.landingUrl,referrer:t.referrer,referrer_path:t.referrerPath}))},t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e,t,r,n,i,o,s,a,c,u=this;return h(this,(function(d){switch(d.label){case 0:return[4,this.getSessionId()];case 1:return e=d.sent(),[4,this.getSessionData()];case 2:return t=d.sent(),(r=this.getCrossDomainSessionId())?this.logger.info("Found session with id ".concat(r," from url")):e&&this.logger.info("Found session with id ".concat(e)),n=this.buildUTMs(),i=f(this.buildReferrer(),2),o=i[0],s=i[1],m=n,a=!!Object.keys(m).length,c=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return p(u,v([e],f(t),!1),void 0,(function(e,t){var r;return void 0===t&&(t=N()),h(this,(function(i){switch(i.label){case 0:return r={landingUrl:this.browser.window.location.href,referrer:o,referrerPath:s,trigger:e,utm:n},[4,this.setSessionId(t)];case 1:return i.sent(),[4,this.setSessionData(r)];case 2:return i.sent(),this.setPixelSession(t,r),this.logger.info("Created new session with id ".concat(t)),this.logger.debug("Session data: ".concat(JSON.stringify(r,void 0,4))),[2]}}))}))},r?(this.logger.info("Keeping cross domain session."),[4,c("cross-domain-session",r)]):[3,4];case 3:return[2,d.sent()];case 4:return e?[3,6]:(this.logger.info("Creating new session. No previous session found."),[4,c("no-previous-session")]);case 5:return[2,d.sent()];case 6:return a?t?[3,8]:(this.logger.info("Creating new session. UTM values found."),[4,c("missing-session-data")]):[3,10];case 7:return[2,d.sent()];case 8:return l=t.utm,g=n,Object.keys(g).filter((function(e){return we.includes(e)})).some((function(e){return l[e]!==g[e]}))?(this.logger.info("Creating new session. UTM values changed."),[4,c("utm-changed")]):[3,10];case 9:return[2,d.sent()];case 10:return this.logger.debug("No change detected."),[4,this.setSessionId(e)];case 11:return d.sent(),t?[4,this.setSessionData(t)]:[3,13];case 12:d.sent(),d.label=13;case 13:return this.setPixelSession(e,t),[2]}var l,g,m}))}))},t.SESSION_ID_COOKIE="__cvg_sid",t.SESSION_COOKIE="__cvg_session",t.SESSION_DURATION=60,t}(V),Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.detectAdBlocker=function(){if("undefined"!=typeof document){var e=document.createElement("div");if(e.className="ads ad adsbox doubleclick ad-placement carbon-ads",e.id="bottomAd",e.style.cssText="height: 1px; width: 1px; position: absolute; left: -999em; top: -999em",document.body){document.body.appendChild(e);var t=document.getElementById("bottomAd");if(!t)return!0;var r=getComputedStyle(t);return!r||"none"===r.display}return!1}},t.prototype.setup=function(){return p(this,void 0,void 0,(function(){return h(this,(function(e){try{this.pixel.setProperty("has_ad_blocker",this.detectAdBlocker())}catch(e){this.logger.error("Error detecting ad blocker",e)}return[2]}))}))},t}(V),Ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return[4,this.browser.getCookie("_epik")];case 1:return(e=t.sent())?[3,3]:(e=this.utils.getURLParameterByName("epik")||"")?[4,this.browser.setCookie("_epik",e,1051200)]:[3,3];case 2:t.sent(),t.label=3;case 3:return e&&this.pixel.setProperty("$pinterest_click_id",e),[2]}}))}))},t}(V),Pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return(e=this.utils.getURLParameterByName("tblcid"))?[3,2]:[4,this.browser.getCookie("__cvg_tblcid")];case 1:e=t.sent(),t.label=2;case 2:return e&&(this.browser.setCookie("__cvg_tblcid",e,129600),this.pixel.setProperty("$taboola_click_id",e)),[2]}}))}))},t}(V),Se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return 0!==(e=(e=this.utils.getURLParameterByName("outbraincid")||"").split(",")[0]).length?[3,2]:[4,this.browser.getCookie("__cvg_outbraincid")];case 1:e=t.sent(),t.label=2;case 2:return e.length&&(this.browser.setCookie("__cvg_outbraincid",e,129600),this.pixel.setProperty("$outbrain_click_id",e)),[2]}}))}))},t}(V),Ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return[4,this.browser.getCookie("session_id")];case 1:return(e=t.sent())&&this.pixel.addAlias("urn:funnelish:session:".concat(e)),[2]}}))}))},t}(V),Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return(e=this.utils.getURLParameterByName("mgidcid"))?[3,2]:[4,this.browser.getCookie("__cvg_mgidcid")];case 1:e=t.sent(),t.label=2;case 2:return e&&(this.browser.setCookie("__cvg_mgidcid",e,129600),this.pixel.setProperty("$mgid_click_id",e)),[2]}}))}))},t}(V),xe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.getCMP=function(){var e,t;return window.hasOwnProperty("Cookiebot")?"cookiebot":window.hasOwnProperty("OneTrust")?"onetrust":window.hasOwnProperty("trustarc")?"trustarc":window.hasOwnProperty("CookieFirst")?"cookiefirst":window.hasOwnProperty("Shopify")&&(null===(e=window.Shopify)||void 0===e?void 0:e.hasOwnProperty("customerPrivacy"))&&(null===(t=window.Shopify.customerPrivacy)||void 0===t?void 0:t.shouldShowBanner())?"shopify":void 0},t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e;return h(this,(function(t){return A()?[2]:(e=this.getCMP())?(this.pixel.setEventProperty("$cmp",e),[2]):[2]}))}))},t}(V),Ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.ts=function(){return Math.floor((new Date).getTime()/1e3)},t.prototype.gclaw=function(){return p(this,void 0,void 0,(function(){var e,t,r;return h(this,(function(n){switch(n.label){case 0:return(e=this.utils.getURLParameterByName("gclid"))?(t="GCL.".concat(this.ts(),".").concat(e),[4,this.browser.setCookie("_gcl_aw",t,129600)]):[3,2];case 1:n.sent(),n.label=2;case 2:return(r=t)?[3,4]:[4,this.browser.getCookie("_gcl_aw")];case 3:r=n.sent(),n.label=4;case 4:return[2,r]}}))}))},t.prototype.gclau=function(){return p(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return[4,this.browser.getCookie("_gcl_au")];case 1:return(e=t.sent())||(e="1.1.".concat(this.utils.randomDigits(10),".").concat(this.ts()),this.browser.setCookie("_gcl_au",e,129600)),[2,e]}}))}))},t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e,t;return h(this,(function(r){switch(r.label){case 0:return[4,this.gclaw()];case 1:return e=r.sent(),[4,this.gclau()];case 2:return t=r.sent(),e&&this.pixel.setProperty("$gcl_aw",e),t&&this.pixel.setProperty("$gcl_au",t),[2]}}))}))},t}(V),Ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setupUuid=function(){return p(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return[4,this.browser.getCookie("_rdt_uuid")];case 1:return(e=t.sent()).length>0&&this.pixel.setProperty("$reddit_uuid",e),[2]}}))}))},t.prototype.setupClickID=function(){return p(this,void 0,void 0,(function(){var e;return h(this,(function(t){return(e=this.utils.getURLParameterByName("rdt_cid"))&&e.length>0&&this.pixel.setProperty("$reddit_click_id",e),[2]}))}))},t.prototype.setup=function(){return p(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.setupUuid()];case 1:return e.sent(),[4,this.setupClickID()];case 2:return e.sent(),[2]}}))}))},t}(V),De=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e,t;return h(this,(function(r){switch(r.label){case 0:return[4,this.browser.getCookie("_scid")];case 1:return(e=r.sent())&&this.pixel.setProperty("$snapchat_sc_cookie1",e),[4,this.browser.getCookie("__cvg_sccid")];case 2:return(t=r.sent())?[3,4]:(t=this.utils.getURLParameterByName("ScCid")||"")?[4,this.browser.setCookie("__cvg_sccid",t,1051200)]:[3,4];case 3:r.sent(),r.label=4;case 4:return t&&this.pixel.setProperty("$snapchat_cid",t),[2]}}))}))},t}(V),Oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return(e=this.utils.getURLParameterByName("awc"))?[3,2]:[4,this.browser.getCookie("__cvg_awc")];case 1:e=t.sent(),t.label=2;case 2:return e&&(this.browser.setCookie("__cvg_awc",e,129600),this.pixel.setProperty("$awin_click_id",e)),[2]}}))}))},t}(V),Le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.calendlyEvent=function(e){return"https://calendly.com"===e.origin&&e.data.event&&0===e.data.event.indexOf("calendly.")?e.data.event.split(".")[1]:void 0},t.prototype.registerListener=function(){var e=this;window.addEventListener("message",(function(t){switch(e.calendlyEvent(t)){case"event_type_viewed":e.pixel.track({method:"track",eventName:"Viewed Calendly Event Type"});break;case"date_and_time_selected":e.pixel.track({method:"track",eventName:"Selected Calendly Date"});break;case"event_scheduled":e.pixel.track({method:"track",eventName:"Scheduled Calendly Event"})}}))},t.prototype.setup=function(){return p(this,void 0,void 0,(function(){return h(this,(function(e){return $(this.registerListener.bind(this)),[2]}))}))},t}(V),qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e,t,r=this;return h(this,(function(n){switch(n.label){case 0:return(e=null===(t=window.postscript)||void 0===t?void 0:t.getSubscriberId())?[3,2]:[4,this.browser.getCookie("ps_id")];case 1:e=n.sent(),n.label=2;case 2:return e&&this.pixel.setProperty("$postscript_subscriber_id",String(e)),window.addEventListener("postscriptPopup",(function(e){var t=e.detail;if("formSubmit"==t.type){var n=t.values,i=t.popupName,o=t.popupId;r.pixel.track({method:"track",eventName:"Submitted Postscript Popup",profileProperties:{$email:n.email,$phone_number:n.phone},properties:u({popup_id:o,popup_name:i},n)})}})),[2]}}))}))},t}(V),$e={C0002:"analytics",C0004:"marketing",C0005:"marketing"},Ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.readConsent=function(){var e=window.OptanonActiveGroups;if(void 0!==e){var t=e.split(",").map((function(e){return e.trim()})).filter((function(e){return""!==e})).map((function(e){return $e[e]}));return{analytics:t.includes("analytics")?"granted":"denied",marketing:t.includes("marketing")?"granted":"denied"}}},t.prototype.setConsent=function(){var e=this.readConsent();e&&this.consentManager.set(e,"OneTrust")},t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e,t=this;return h(this,(function(r){return $((function(){return t.setConsent()})),e=window.OptanonWrapper,window.OptanonWrapper=function(){t.logger.debug("[onetrust] OptanonWrapper called"),t.setConsent(),e&&e()},[2]}))}))},t}(V),Re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setConsent=function(){var e,t=null===(e=window.Cookiebot)||void 0===e?void 0:e.consent;t&&this.consentManager.set({analytics:t.statistics?"granted":"denied",marketing:t.marketing?"granted":"denied"},"Cookiebot")},t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e=this;return h(this,(function(t){return this.setConsent(),window.addEventListener("CookiebotOnConsentReady",(function(){return e.setConsent()})),[2]}))}))},t}(V),Me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setConsent=function(){var e,t=null===(e=window.getCkyConsent)||void 0===e?void 0:e.call(window);if(null==t?void 0:t.categories){var r=t.categories,n=r.advertisement,i=r.analytics;this.consentManager.set({analytics:i?"granted":"denied",marketing:n?"granted":"denied"},"CookieYes")}},t.prototype.waitForCookieYes=function(){return p(this,void 0,void 0,(function(){return h(this,(function(e){return[2,new Promise((function(e,t){if(window.getCkyConsent)e();else{var r=function(){clearTimeout(n),window.removeEventListener("cookieyes_banner_load",i)},n=setTimeout((function(){r(),t()}),5e3),i=function(){r(),e()};window.addEventListener("cookieyes_banner_load",i)}}))]}))}))},t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e=this;return h(this,(function(t){switch(t.label){case 0:if(document.addEventListener("cookieyes_banner_load",(function(){return e.setConsent()})),document.addEventListener("cookieyes_consent_update",(function(){return e.setConsent()})),!window.cookieyes||window.getCkyConsent)return[3,4];this.logger.debug("CookieYes is present on the page, but consent is not yet available. Waiting for the banner to load."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.waitForCookieYes()];case 2:return t.sent(),[3,4];case 3:return t.sent(),this.logger.debug("CookieYes banner did not load before timeout."),[3,4];case 4:return this.setConsent(),[2]}}))}))},t}(V),Ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.getLevel=function(e,t){var r,n=null===(r=e.categories[t])||void 0===r?void 0:r.state;return n?"ALL_DENIED"===n?"denied":"granted":"denied"},t.prototype.setConsent=function(e){if(e){var t={analytics:this.getLevel(e,"functional"),marketing:this.getLevel(e,"marketing")};this.consentManager.set(t,"Usercentrics")}},t.prototype.waitForUsercentrics=function(){return p(this,void 0,void 0,(function(){var e=this;return h(this,(function(t){switch(t.label){case 0:return window.__ucCmp?[4,new Promise((function(t,r){var n,i=setTimeout((function(){return r()}),5e3);null===(n=window.__ucCmp)||void 0===n||n.getConsentDetails().then((function(r){clearTimeout(i),e.setConsent(r),t()}))}))]:[2];case 1:return[2,t.sent()]}}))}))},t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e=this;return h(this,(function(t){switch(t.label){case 0:window.addEventListener("UC_CONSENT",(function(t){return e.setConsent(t.detail)})),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.waitForUsercentrics()];case 2:return t.sent(),[3,4];case 3:return t.sent(),this.logger.debug("Usercentrics did not load before timeout."),[3,4];case 4:return[2]}}))}))},t}(V),Fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e,t,r,n,i,o,s;return h(this,(function(a){try{for(e=l(null!==(s=this.config.tracking_snippets)&&void 0!==s?s:[]),t=e.next();!t.done;t=e.next()){r=t.value;try{(n=document.createElement("script")).type="text/javascript",n.text=r,document.body.appendChild(n),this.logger.info("Added tracking snippet")}catch(e){this.logger.warn("Failed to inject snippet",r)}}}catch(e){i={error:e}}finally{try{t&&!t.done&&(o=e.return)&&o.call(e)}finally{if(i)throw i.error}}return[2]}))}))},t}(V),je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setConsent=function(e){var t,r,n=null===(r=null===(t=window.__COOKIE_BANNER_SETTINGS__)||void 0===t?void 0:t.widgetConfig)||void 0===r?void 0:r.baseConsent;if(n){var i=u(u({},n),e);this.consentManager.set({analytics:(null==i?void 0:i.performance)?"granted":"denied",marketing:(null==i?void 0:i.advertising)?"granted":"denied"},"CookieFirst")}},t.prototype.waitForCookieFirst=function(){return p(this,void 0,void 0,(function(){return h(this,(function(e){return[2,new Promise((function(e,t){if(window.CookieFirst)e();else{var r=function(){clearTimeout(n),window.removeEventListener("cf_init",i),window.removeEventListener("cf_consent",i)},n=setTimeout((function(){r(),t()}),5e3),i=function(){r(),e()};window.addEventListener("cf_init",i),window.addEventListener("cf_consent",i)}}))]}))}))},t.prototype.setup=function(){return p(this,void 0,void 0,(function(){var e=this;return h(this,(function(t){switch(t.label){case 0:if(!window.__COOKIE_BANNER_SETTINGS__)return[2];if(window.addEventListener("cf_consent",(function(t){return e.setConsent(t.detail)})),window.CookieFirst)return[3,4];this.logger.debug("CookieFirst is present on the page, but consent is not yet available. Waiting for the banner to load."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.waitForCookieFirst()];case 2:return t.sent(),[3,4];case 3:return t.sent(),this.logger.debug("CookieFirst banner did not load before timeout."),[3,4];case 4:return window.CookieFirst&&this.setConsent(window.CookieFirst.consent),[2]}}))}))},t}(V),Ge=function(){function e(e){var t,r=this;this.getCookie=function(e){return p(r,void 0,void 0,(function(){var t,r,n,i;return h(this,(function(o){switch(o.label){case 0:return(null===(i=window.shopify)||void 0===i?void 0:i.browser)?[4,window.shopify.browser.cookie.get(e)]:[3,2];case 1:return[2,o.sent()];case 2:for(e+="=",t=document.cookie.split(";"),r=0;r<t.length;r++){for(n=t[r];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return[2,n.substring(e.length,n.length)]}return[2,""]}}))}))},this.setCookie=function(e,t,n){return p(r,void 0,void 0,(function(){var r,i,o,s,a,c,u,d,p,g,m,y;return h(this,(function(h){switch(h.label){case 0:r=["".concat(e,"=").concat(t)],n&&((i=new Date).setTime(i.getTime()+60*n*1e3),r.push("expires=".concat(i.toUTCString()))),r.push("path=/","SameSite=Lax"),o=this.getPossibleDomains(),h.label=1;case 1:h.trys.push([1,9,10,11]),s=l(o),a=s.next(),h.label=2;case 2:return a.done?[3,8]:(c=a.value,u=c?v(v([],f(r),!1),["domain=".concat(c)],!1).join("; "):r.join("; "),(null===(y=window.shopify)||void 0===y?void 0:y.browser)?[4,window.shopify.browser.cookie.set(u)]:[3,4]);case 3:return h.sent(),[3,5];case 4:document.cookie=u,h.label=5;case 5:return[4,this.getCookie(e)];case 6:if((d=h.sent())===t||encodeURI(d)===t)return this.logger.debug("Set cookie ".concat(u)),[2];h.label=7;case 7:return a=s.next(),[3,2];case 8:return[3,11];case 9:return p=h.sent(),g={error:p},[3,11];case 10:try{a&&!a.done&&(m=s.return)&&m.call(s)}finally{if(g)throw g.error}return[7];case 11:return[2]}}))}))},this.getLocalStorage=function(e){return p(r,void 0,void 0,(function(){var t,r;return h(this,(function(n){switch(n.label){case 0:return(null===(r=null===(t=window.shopify)||void 0===t?void 0:t.browser)||void 0===r?void 0:r.localStorage)?[4,window.shopify.browser.localStorage.getItem(e)]:[3,2];case 1:return[2,n.sent()];case 2:return[2,window.localStorage.getItem(e)]}}))}))},this.setLocalStorage=function(e,t){return p(r,void 0,void 0,(function(){var r,n;return h(this,(function(i){return(null===(n=null===(r=window.shopify)||void 0===r?void 0:r.browser)||void 0===n?void 0:n.localStorage)&&window.localStorage.setItem(e,t),window.localStorage.setItem(e,t),[2]}))}))},this.getSessionStorage=function(e){return p(r,void 0,void 0,(function(){var t,r;return h(this,(function(n){switch(n.label){case 0:return(null===(r=null===(t=window.shopify)||void 0===t?void 0:t.browser)||void 0===r?void 0:r.sessionStorage)?[4,window.shopify.browser.sessionStorage.getItem(e)]:[3,2];case 1:return[2,n.sent()];case 2:return[2,window.sessionStorage.getItem(e)]}}))}))},this.setSessionStorage=function(e,t){return p(r,void 0,void 0,(function(){var r,n;return h(this,(function(i){return(null===(n=null===(r=window.shopify)||void 0===r?void 0:r.browser)||void 0===n?void 0:n.sessionStorage)&&window.shopify.browser.sessionStorage.setItem(e,t),window.sessionStorage.setItem(e,t),[2]}))}))},this.logger=e,(null===(t=window.shopify)||void 0===t?void 0:t.init)?(this.window=window.shopify.init.context.window,this.navigator=window.shopify.init.context.navigator,this.document=window.shopify.init.context.document):(this.window=window,this.navigator=navigator,this.document=document),this.window.screen&&(this.screen_resolution="".concat(this.window.screen.width,"x").concat(this.window.screen.height));try{this.timeZone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}}return e.prototype.getPossibleDomains=function(){for(var e=[],t=this.window.location.hostname.split("."),r=t.length-2;r>=0;r--)e.push(t.slice(r).join("."));return e.push(void 0),e},e}(),We={debug:0,info:1,warn:2,error:3,off:4},Be=function(){function e(e,t){this.level=this.getLevelOverride()||e||"error",this.publicToken=t?"[".concat(t,"]"):"",this.location=A()?"[sandbox]":""}return e.prototype.getLevelOverride=function(){try{var e=localStorage.getItem("logLevel");if(e)return e}catch(e){}if(function(){var e,t;try{return!!navigator.webdriver||void 0!==globalThis.process&&void 0!==(null===(t=null===(e=globalThis.process)||void 0===e?void 0:e.env)||void 0===t?void 0:t.JEST_WORKER_ID)}catch(e){return!1}}())return"debug"},e.prototype._log=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];We[this.level]<=We[e]&&"off"!==e&&console["debug"===e?"info":e].apply(console,v(["[cvg]".concat(this.publicToken).concat(this.location,"[").concat(e,"]"),t],f(r),!1))},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._log.apply(this,v(["debug",e],f(t),!1))},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._log.apply(this,v(["info",e],f(t),!1))},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._log.apply(this,v(["warn",e],f(t),!1))},e.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._log.apply(this,v(["error",e],f(t),!1))},e}(),Ke=function(){function e(e){var t=this;this.TRACK_METHODS=["track","trackSingle","trackCustom","trackSingleCustom"],this.SINGLE_TRACK_METHODS=["trackSingle","trackSingleCustom"],this.SHARED_TRACK_METHODS=["track","trackCustom"],this.filter=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(t.SINGLE_TRACK_METHODS.includes(e[0])&&e[1]!==t.pixelId)return!0;if("track"===e[0]||"trackSingle"===e[0]||"trackCustom"===e[0]){var n=v([],f(e),!1),i=n.shift();t.SINGLE_TRACK_METHODS.includes(i)&&n.shift();var o=n.shift(),s=n.shift(),a=n.shift(),c=null==a?void 0:a.eventID,u=!(null==a?void 0:a._convergeManaged);if(u&&(t.eventLogger.logEvent({forwarded_event_name:o,forwarded_event_id:c,forwarded_event_properties:s,pixel_method:i,external:u,status:t.block_external_tracking?re.BLOCKED:re.SUCCESS}),t.block_external_tracking))return!1}return!0},this.pixelId=e.config.pixel_id,this.block_external_tracking=!!e.config.block_external_tracking,this.logger=e.logger,this.eventLogger=e.connectionEventLogger,this.publicToken=e.publicToken,this.browser=e.browser,this.utils=e.utils}return e.prototype.constructFbq=function(e){var t=this,r=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{if(!t.filter.apply(t,v([],f(r),!1)))return}catch(e){t.logger.error("[Facebook Pixel ".concat(t.pixelId,"] Error filtering event"),e),M(e,t.browser,t.publicToken)}e.apply(void 0,v([],f(r),!1))};return r.push=r,r.loaded=!0,r.version="2.0",r.queue=[],r._convergeManaged=!0,r.disablePushState=!0,window.fbq=r,window._fbq=r,r},e.prototype.mount=function(){if("undefined"!=typeof window){if(window.fbq){this.logger.debug("[Facebook Pixel ".concat(this.pixelId,"] Fbq already exists, overwriting and passing calls through"));var e=window.fbq,t=this.constructFbq((function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.apply(e,t)}));Object.assign(t,e),Object.setPrototypeOf(t,Object.getPrototypeOf(e))}else this.logger.debug("[Facebook Pixel ".concat(this.pixelId,"] Fbq does not exist, mounting on window")),this.constructFbq((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window.fbq.callMethod?window.fbq.callMethod.apply(window.fbq,e):window.fbq.queue.push(e)}));window.fbq("init",this.pixelId),this.utils.addScript("https://connect.facebook.net/en_US/fbevents.js",{id:"cvg-facebook"}),this.logger.debug("[Facebook Pixel ".concat(this.pixelId,"] Initialized"))}},e}(),He=["AddPaymentInfo","AddToCart","AddToWishlist","CompleteRegistration","Contact","CustomizeProduct","Donate","FindLocation","InitiateCheckout","Lead","Purchase","Schedule","Search","StartTrial","SubmitApplication","Subscribe","ViewContent","PageView"],Qe=function(e){function t(t,r){var n=e.call(this,t,r)||this,i=t.config;return n.pixelId=i.pixel_id,n.itemIdType=i.content_id_type||"default",n.customEvents=i.custom_events||[],n.customProperties=i.fb_custom_properties||[],n.sendSubscribedToNewsletterAsLeads=void 0===i.send_subscribed_to_newsletter_as_leads||i.send_subscribed_to_newsletter_as_leads,n}return c(t,e),t.setup=function(e){new Ke(e).mount()},t.prototype.track=function(e,t,r,n){var i=r?"trackSingleCustom":"trackSingle",o=this.getCustomProperties(this.properties),s=u(u({},t),o);window.fbq(i,this.pixelId,e,s,{eventID:this.eventID,_convergeManaged:!0}),this.logEvent({forwardedEventName:e,forwardedEventID:this.eventID,forwardedProperties:s,method:i,eventMappingId:n})},t.prototype.advancedMatching=function(e){var t=e.$email||e.$email_sha256,r=e.$first_name||e.$first_name_sha256,n=e.$last_name||e.$last_name_sha256,i=e.$phone_number||e.$phone_number_sha256,o=e.$city||e.$city_sha256,s=e.$state||e.$state_sha256,a=e.$zip_code||e.$zip_code_sha256,c=e.$country_code||e.$country_code_sha256,u={external_id:e.$cookie_id&&"converge_cookie_id:".concat(e.$cookie_id),em:t,fn:r,ln:n,pn:i,ct:o,st:s,zp:a,cn:c};window.fbq("init",this.pixelId,u),this.setForwardedProfileProperties(u)},t.prototype.forward=function(){switch(this.advancedMatching(this.profileProperties),this.eventName){case"$page_load":return void this.track("PageView",{});case"Viewed Product":return void this.track("ViewContent",this.parseViewedProduct(this.properties));case"Viewed Collection":return void this.track("ViewContent",this.parseViewedCollection(this.properties));case"Added To Cart":return void this.track("AddToCart",this.parseAddedToCart(this.properties));case"Started Checkout":return void this.track("InitiateCheckout",this.parseCheckout(this.properties));case"Added Payment Info":return void this.track("AddPaymentInfo",this.parseCheckout(this.properties));case"Placed Order":return void this.track("Purchase",this.parsePlacedOrder(this.properties));case"Started Subscription":return void this.track("Subscribe",this.parseStartedSubscription(this.properties));case"Added To Wishlist":return void this.track("AddToWishlist",this.parseAddedToWishlist(this.properties));case"Searched":return void this.track("Search",this.parseSearched(this.properties));case"Searched For Store":return void this.track("FindLocation",this.parseSearched(this.properties));case"Subscribed To Newsletter":return void(this.sendSubscribedToNewsletterAsLeads&&this.track("Lead",{}))}this.fireCustomEvents()},t.prototype.forwardWithMapping=function(e){this.advancedMatching(this.profileProperties);var t=void 0;switch(this.eventName){case"$page_load":t={};break;case"Viewed Product":t=this.parseViewedProduct(this.properties);break;case"Viewed Collection":t=this.parseViewedCollection(this.properties);break;case"Added To Cart":t=this.parseAddedToCart(this.properties);break;case"Started Checkout":case"Added Payment Info":t=this.parseCheckout(this.properties);break;case"Placed Order":t=this.parsePlacedOrder(this.properties);break;case"Started Subscription":t=this.parseStartedSubscription(this.properties);break;case"Added To Wishlist":t=this.parseAddedToWishlist(this.properties);break;case"Searched":case"Searched For Store":t=this.parseSearched(this.properties);break;default:t=this.tryParseCustomEvent(this.properties)}var r=!He.includes(e.destination_event_name);this.track(e.destination_event_name,t||{},r,e.id)},t.prototype.getContentId=function(e){if("default"===this.itemIdType)return e.variant_id||e.product_id;if("product_id"===this.itemIdType)return e.product_id;if("variant_id"===this.itemIdType)return e.variant_id;if("sku"===this.itemIdType)return e.sku;throw new Error("Unknown item id type: ".concat(this.itemIdType))},t.prototype.getContentType=function(e){if("default"===this.itemIdType)return e.variant_id?"product":"product_group";if("product_id"===this.itemIdType)return"product_group";if("variant_id"===this.itemIdType)return"product";if("sku"===this.itemIdType)return"product";throw new Error("Unknown item id type: ".concat(this.itemIdType))},t.prototype.fireCustomEvents=function(){var e,t;try{for(var r=l(this.customEvents),n=r.next();!n.done;n=r.next()){var i=n.value;if(i.converge_event_name===this.eventName){var o=this.tryParseCustomEvent(this.properties);return void this.track(i.fb_event_name,o||{},!0)}}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.getCustomProperties=function(e){var t,r,n={};try{for(var i=l(this.customProperties),o=i.next();!o.done;o=i.next()){var s=o.value;e[s.converge_property]&&(n[s.fb_property]=e[s.converge_property])}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n},t.prototype.parseViewedProduct=function(e){return{currency:e.currency,value:e.price,content_name:e.name,content_ids:[this.getContentId(e)],content_type:this.getContentType(e),contents:[{id:this.getContentId(e),quantity:1}]}},t.prototype.parseViewedCollection=function(e){var t,r,n,i,o,s=this;return{content_name:e.name,content_type:(null===(t=e.items)||void 0===t?void 0:t.length)?this.getContentType(e.items[0]):void 0,content_category:e.name,currency:(null===(r=e.items)||void 0===r?void 0:r.length)?null===(n=e.items[0])||void 0===n?void 0:n.currency:void 0,content_ids:null===(i=e.items)||void 0===i?void 0:i.map(this.getContentId.bind(this)),contents:null===(o=e.items)||void 0===o?void 0:o.map((function(e){return{id:s.getContentId(e),quantity:1}}))}},t.prototype.parseAddedToCart=function(e){return{currency:e.currency,value:e.price*(e.quantity||1),content_name:e.name,content_ids:[this.getContentId(e)],content_type:this.getContentType(e),contents:[{id:this.getContentId(e),quantity:e.quantity}]}},t.prototype.parseAddedToWishlist=function(e){return{currency:e.currency,value:e.price*(e.quantity||1),content_name:e.name,content_ids:[this.getContentId(e)],content_type:this.getContentType(e),contents:[{id:this.getContentId(e),quantity:e.quantity}]}},t.prototype.parseSearched=function(e){return{search_string:e.query}},t.prototype.parseCheckout=function(e){var t,r,n,i,o=this;return{currency:e.currency,value:this.getConversionAmount(e),num_items:null===(t=e.items)||void 0===t?void 0:t.reduce((function(e,t){return e+t.quantity}),0),content_type:(null===(r=e.items)||void 0===r?void 0:r.length)?this.getContentType(e.items[0]):void 0,content_ids:null===(n=e.items)||void 0===n?void 0:n.map(this.getContentId.bind(this)),contents:null===(i=e.items)||void 0===i?void 0:i.map((function(e){return{id:o.getContentId(e),quantity:e.quantity}}))}},t.prototype.parsePlacedOrder=function(e){return u(u({},this.parseCheckout(e)),{order_id:e.id})},t.prototype.parseStartedSubscription=function(e){return u(u({},this.parseCheckout(e)),{order_id:e.id,subscription_id:e.id})},t.prototype.tryGetQuantity=function(e){if(O(e)){var t=e.quantity;if("number"==typeof t)return t;if(void 0===t)return 1}},t.prototype.tryGetContent=function(e){if(O(e))return{id:this.getContentId(e),type:this.getContentType(e),quantity:this.tryGetQuantity(e)}},t.prototype.tryParseCustomEvent=function(e){var t;if(void 0!==e.total_price&&e.currency){var r=void 0;Array.isArray(e.items)&&(r=e.items.map(this.tryGetContent.bind(this)).filter((function(e){return!!e})));var n=null==r?void 0:r.reduce((function(e,t){return e+((null==t?void 0:t.quantity)||0)}),0),i=null===(t=null==r?void 0:r[0])||void 0===t?void 0:t.type,o=null==r?void 0:r.map((function(e){return null==e?void 0:e.id})).filter((function(e){return"string"==typeof e}));return{currency:e.currency,value:this.tryGetConversionAmount(e),num_items:n,content_type:i,content_ids:o,contents:r}}if(e.currency&&void 0!==e.price){var s=this.tryGetContent(e);if((null==s?void 0:s.id)&&(null==s?void 0:s.type))return{currency:e.currency,value:e.price,content_name:e.name,content_ids:[s.id],content_type:s.type,contents:[{id:s.id,quantity:this.tryGetQuantity(e)}]}}},t}(se),Je=(0).constructor,Ze=Je.isFinite;Je.isInteger;var Ye=[].constructor.isArray;function ze(e){return null!==e&&"object"==typeof e}function Xe(e,t){return void 0===t&&(t=0),"string"==typeof e&&e.length>=t}function et(e){return Ze(e)}function tt(e){return Ye(e)}function rt(e,t){return ze(e)&&t in e}var nt="'\"`",it=new(function(){function e(e){this.size=e,this.reset()}return e.prototype.reset=function(){this.oldestIndex=0,this.map={},this.cachedKeys=new Array(this.size)},e.prototype.get=function(e){return this.map[e]},e.prototype.set=function(e,t){this.map[e]=t;var r=this.cachedKeys[this.oldestIndex];void 0!==r&&delete this.map[r],this.cachedKeys[this.oldestIndex]=e,this.oldestIndex++,this.oldestIndex%=this.size},e}())(1e3);function ot(e){var t=e.charAt(0),r=e.substr(-1);if(nt.includes(t)||nt.includes(r)){if(e.length<2||t!==r)throw new SyntaxError('Mismatching string quotation: "'+e+'"');return e.substring(1,e.length-1)}if(e.includes("["))throw new SyntaxError('Missing ] in varName "'+e+'"');return"+"===t?e.substr(1):e}function st(e,t,r){var n=t.trim();if(""===n)return e;if(n.startsWith(".")){if(!r)throw new SyntaxError('Unexpected . at the start of "'+t+'"');if(""===(n=n.substr(1).trim()))return e}else if(r)throw new SyntaxError('Missing . at the start of "'+t+'"');if(n.endsWith("."))throw new SyntaxError('Unexpected "." at the end of "'+t+'"');for(var i=0,o=n.split(".");i<o.length;i++){var s=o[i].trim();if(""===s)throw new SyntaxError('Empty prop name when parsing "'+t+'"');e.push(s)}return e}function at(e){if(!Xe(e))throw new TypeError("Cannot parse path. Expected string. Got a "+typeof e);for(var t,r,n=0,i=!1,o=new Array(0),s=0;s<e.length&&-1!==(t=e.indexOf("[",s));s=n){if(-1===(n=e.indexOf("]",t)))throw new SyntaxError('Missing ] in varName "'+e+'"');if(0===(r=e.substring(t+1,n).trim()).length)throw new SyntaxError("Unexpected token ]");n++,st(o,e.substring(s,t),i),o.push(ot(r)),i=!0}return st(o,e.substring(n),i)}function ct(e,t,r){if(void 0===r&&(r={}),!ze(r))throw new TypeError("get expects an object option. Got "+typeof r);var n=r.depth,i=void 0===n?10:n;if(!et(i)||i<=0)throw new RangeError("Expected a positive number for depth. Got "+i);var o=Array.isArray(t)?t:at.cached(t),s=function(){return o.join(" > ")};if(o.length>i)throw new ReferenceError("The path cannot be deeper than "+i+' levels. Got "'+s()+'"');for(var a=e,c=0,u=o;c<u.length;c++){var d=u[c];if(!rt(a,d)){if(r.propsExist)throw new ReferenceError(d+' is not defined in the scope at path: "'+s()+'"');return}a=a[d]}return a}at.cached=function(e){var t=it.get(e);return void 0===t&&(t=at(e),it.set(e,t)),t};var ut=function(){function e(e,t){var r=this;if(void 0===t&&(t={}),this.tokens=e,this.options=t,this.render=function(e){void 0===e&&(e={});var t=r.tokens.varNames.length;r.cacheParsedPaths();for(var n=new Array(t),i=0;i<t;i++)n[i]=ct(e,r.toPathCache[i],r.options);return r.stringify(n)},this.renderFn=function(e,t){void 0===t&&(t={});var n=r.resolveVarNames(e,t);return r.stringify(n)},this.renderFnAsync=function(e,t){return void 0===t&&(t={}),Promise.all(r.resolveVarNames(e,t)).then((function(e){return r.stringify(e)}))},!ze(e)||!tt(e.strings)||!tt(e.varNames)||e.strings.length!==e.varNames.length+1)throw new TypeError("Invalid tokens object");if(!ze(t))throw new TypeError("Options should be an object. Got a "+typeof t);t.validateVarNames&&this.cacheParsedPaths()}return e.prototype.cacheParsedPaths=function(){var e=this.tokens.varNames;if(void 0===this.toPathCache){this.toPathCache=new Array(e.length);for(var t=0;t<e.length;t++)this.toPathCache[t]=at.cached(e[t])}},e.prototype.resolveVarNames=function(e,t){void 0===t&&(t={});var r=this.tokens.varNames;if("function"!=typeof e)throw new TypeError("Expected a resolver function. Got "+String(e));for(var n=r.length,i=new Array(n),o=0;o<n;o++)i[o]=e.call(null,r[o],t);return i},e.prototype.stringify=function(e){for(var t=this.tokens.strings,r=this.options.explicit,n=e.length,i="",o=0;o<n;o++){i+=t[o];var s=e[o];(r||null!=s)&&(i+=s)}return i+=t[n]},e}();function dt(e,t){void 0===t&&(t={});var r=function(e,t){if(void 0===t&&(t={}),!Xe(e))throw new TypeError("The template parameter must be a string. Got a "+typeof e);if(!ze(t))throw new TypeError("Options should be an object. Got a "+typeof t);var r=t.tags,n=void 0===r?["{{","}}"]:r,i=t.maxVarNameLength,o=void 0===i?1e3:i;if(!tt(n)||2!==n.length)throw TypeError("tags should be an array of two elements. Got "+String(n));var s=n[0],a=n[1];if(!Xe(s,1)||!Xe(a,1)||s===a)throw new TypeError('The open and close symbols should be two distinct non-empty strings. Got "'+s+'" and "'+a+'"');if(!et(o)||o<=0)throw new Error("Expected a positive number for maxVarNameLength. Got "+o);for(var c,u,d=s.length,p=a.length,h=0,l=[],f=[],v=0;v<e.length&&-1!==(c=e.indexOf(s,v));){var g=c+d;if(-1===(h=e.substr(g,o+p).indexOf(a)))throw new SyntaxError('Missing "'+a+'" in the template for the "'+s+'" at position '+c+" within "+o+" characters");if(h+=g,0===(u=e.substring(g,h).trim()).length)throw new SyntaxError('Unexpected "'+a+'" tag found at position '+c);if(u.includes(s))throw new SyntaxError('Variable names cannot have "'+s+'". But at position '+c+'. Got "'+u+'"');f.push(u),h+=p,l.push(e.substring(v,c)),v=h}return l.push(e.substring(h)),{strings:l,varNames:f}}(e,t);return new ut(r,t)}var pt=function(e){if("undefined"!=typeof document&&void 0!==document.body){var t=document.createRange().createContextualFragment(e);document.body.append(t)}},ht=function(e){function t(t,r){var n=e.call(this,t,r)||this,i=t.config;return n.eventHtml=i.event_html.map((function(e){return{contentRenderer:dt(e.content,{explicit:!0,propsExist:!1,validateVarNames:!1}),eventName:e.event_name}})),n}return c(t,e),t.setup=function(e){if("undefined"!=typeof window){var t=e.config;t.setup_html.length>0&&pt(t.setup_html),e.connectionEventLogger.logEvent({event_name:"setup",pixel_method:"html",forwarded_event_name:"setup",forwarded_event_properties:{content:t.setup_html}})}},t.prototype.forward=function(){var e,t;try{for(var r=l(this.eventHtml),n=r.next();!n.done;n=r.next()){var i=n.value;if(i.eventName===this.eventName){var o=i.contentRenderer.renderFn(this.resolve,u(u({},this.properties),this.profileProperties&&{profileProperties:this.profileProperties}));pt(o),this.logEvent({forwardedEventName:i.eventName,forwardedProperties:{content:o}})}}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.forwardWithMapping=function(e){var t,r,n="*"===e.destination_event_name?this.eventName:e.destination_event_name;try{for(var i=l(this.eventHtml),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.eventName===n){var a=void 0;try{a=s.contentRenderer.renderFn(this.resolve,u(u({},this.properties),this.profileProperties&&{profileProperties:this.profileProperties})),pt(a)}catch(e){this.logger.error("Failed to render custom html",e),M(e,this.browser,this.pixel.publicToken);continue}this.logEvent({forwardedEventName:s.eventName,forwardedProperties:{content:a},eventMappingId:e.id})}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},t.prototype.resolve=function(e,t){var r=ct(t,e);return O(r)?JSON.stringify(r):"string"==typeof r?'"'.concat(r,'"'):r},t}(se),lt=function(e){return new ne({dataLayerName:e.config.internal_converge_data_layer?Y:"dataLayer",tagId:e.config.tag_id,utils:e.utils,logger:e.logger})},ft=function(e){function t(t,r){var n=e.call(this,t,r)||this,i=t.config;n.tagId=i.tag_id,n.itemIdType=i.item_id_type||"product_id",n.customEvents=i.custom_google_ads_events||[],n.conversions=i.conversions||[];var o=lt(t);return n.gtag=o.gtag.bind(o),n}return c(t,e),t.setup=function(e){lt(e).mount({allow_enhanced_conversions:!0})},t.prototype.send=function(e,t){this.gtag("event",e,u(u({},t),{send_to:this.tagId,send_from:"converge"})),this.logEvent({forwardedEventName:e,forwardedProperties:t,method:"event"})},t.prototype.forward=function(){var e,t,r=this.eventName,n=this.properties;switch(this.setUserData(),this.trackConversions(),r){case"Viewed Product":this.send("view_item",{value:n.price,currency:n.currency,items:[this.parseItem(n)]});break;case"Selected Product":this.send("select_item",{value:n.price,currency:n.currency,items:[this.parseItem(n)]});break;case"Viewed Collection":this.send("view_item_list",{items:null===(e=n.items)||void 0===e?void 0:e.map(this.parseItem.bind(this))});break;case"Added To Cart":this.send("add_to_cart",{value:n.price,currency:n.currency,items:[this.parseItem(n)]});break;case"Removed From Cart":this.send("remove_from_cart",{value:n.price,currency:n.currency,items:[this.parseItem(n)]});break;case"Added To Wishlist":this.send("add_to_wishlist",{value:n.price,currency:n.currency,items:[this.parseItem(n)]});break;case"Removed From Wishlist":this.send("remove_from_wishlist",{value:n.price,currency:n.currency,items:[this.parseItem(n)]});break;case"Searched For Store":this.send("search",{value:null===(t=n.product)||void 0===t?void 0:t.price,currency:null==n?void 0:n.currency,location:n.query,items:n.product&&[this.parseItem(n.product)]});break;case"Viewed Cart":this.send("view_cart",this.parseCheckout(n));break;case"Started Checkout":this.send("begin_checkout",this.parseCheckout(n));break;case"Added Payment Info":this.send("add_payment_info",this.parseCheckout(n));break;case"Placed Order":this.send("purchase",this.parseCheckout(n))}this.fireCustomEvents()},t.prototype.fireCustomEvents=function(){var e,t;try{for(var r=l(this.customEvents),n=r.next();!n.done;n=r.next()){var i=n.value;this.eventName===i.event_name&&this.send(i.google_ads_event_name,{value:this.tryGetConversionAmount(this.properties),currency:this.properties.currency,items:[{id:this.getItemId(this.properties),google_business_vertical:"retail"}]})}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.getItemId=function(e){if("product_id"===this.itemIdType)return e.product_id;if("variant_id"===this.itemIdType)return e.variant_id;if("sku"===this.itemIdType)return e.sku;throw new Error("Invalid item_id_type ".concat(this.itemIdType))},t.prototype.parseItem=function(e){return{id:this.getItemId(e),google_business_vertical:"retail"}},t.prototype.parseCheckout=function(e){var t;return{value:this.getConversionAmount(e),currency:e.currency,items:null===(t=e.items)||void 0===t?void 0:t.map(this.parseItem.bind(this))}},t.prototype.trackConversions=function(){var e,t,r=this,n=r.eventName,i=r.properties,o=r.eventID;try{for(var s=l(this.conversions),a=s.next();!a.done;a=s.next()){var c=a.value;if(!c.server&&n===c.event_name&&c.conversion_id.length>0){var d={value:this.tryGetConversionAmount(i),currency:i.currency,transaction_id:o},p=c.measurement_id?"".concat(c.measurement_id,"/").concat(c.conversion_id):"".concat(this.tagId,"/").concat(c.conversion_id);this.gtag("event","conversion",u({send_to:p},d)),this.logEvent({forwardedEventName:p,forwardedProperties:d,forwardedEventID:o,method:"conversion"})}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}},t.prototype.setUserData=function(){var e=this.profileProperties,t={email:e.$email,phone_number:e.$phone_number,address:{first_name:e.$first_name,last_name:e.$last_name,street:e.$street,city:e.$city,region:e.$state,postal_code:e.$zip_code,country:e.$country_code}};this.gtag("set","user_data",t),this.setForwardedProfileProperties(t),this.setForwardedProfileProperties(ee.toObj())},t}(se),vt={add_to_cart:"AddToCart",checkout:"Checkout",custom:"Custom",lead:"Lead",page_visit:"PageVisit",search:"Search",signup:"Signup",view_category:"ViewCategory",watch_video:"WatchVideo"},gt=function(e){function t(t,r){var n=e.call(this,t,r)||this,i=t.config;return n.tagId=i.tag_id,n.contentIdType=i.pinterest_content_id_type||"product_id",n}return c(t,e),t.setup=function(e){if("undefined"!=typeof window){var t=e.utils,r=e.config;t.addScript("https://s.pinimg.com/ct/core.js",{id:"cvg-pinterest"}),window.pintrk||(window.pintrk=function(){window.pintrk.queue.push(Array.prototype.slice.call(arguments))},window.pintrk.queue=[],window.pintrk.version="3.0"),window.pintrk("load",r.tag_id)}},t.prototype.track=function(e,t,r,n){window.pintrk("track",e,u(u({},t),{eventID:r})),this.logEvent({forwardedEventName:e,forwardedProperties:t,forwardedEventID:r,method:"track",eventMappingId:n})},t.prototype.forward=function(){var e,t=this,r=this,n=r.eventName,i=r.properties,o=r.eventID;switch(this.advancedMatching(),n){case"$page_load":window.pintrk("page"),this.logEvent({forwardedEventName:"page",method:"page"});break;case"Viewed Product":this.track("PageVisit",this.parseProduct(i),"page_visit::".concat(o));break;case"Viewed Collection":this.track("ViewCategory",{category_id:i.id,category_name:i.name,items:null===(e=i.items)||void 0===e?void 0:e.map((function(e){return t.parseProduct(e)}))},"view_category::".concat(o));break;case"Added To Cart":this.track("AddToCart",this.parseProduct(i),"add_to_cart::".concat(o));break;case"Placed Order":this.track("Checkout",this.parseCheckout(i),"checkout::".concat(o));break;case"Searched":this.track("Search",{search_query:i.query},"search::".concat(o));break;case"Subscribed To Newsletter":this.track("Lead",{},"lead::".concat(o))}},t.prototype.forwardWithMapping=function(e){var t,r=this;this.advancedMatching();var n=void 0;if("page"===e.destination_event_name)return window.pintrk("page"),void this.logEvent({forwardedEventName:"page",method:"page",eventMappingId:e.id});switch(this.eventName){case"$page_load":case"Subscribed To Newsletter":default:n={};break;case"Viewed Product":case"Added To Cart":n=this.parseProduct(this.properties);break;case"Viewed Collection":n={category_id:this.properties.id,category_name:this.properties.name,items:null===(t=this.properties.items)||void 0===t?void 0:t.map((function(e){return r.parseProduct(e)}))};break;case"Placed Order":n=this.parseCheckout(this.properties);break;case"Searched":n={search_query:this.properties.query}}var i=vt[e.destination_event_name];i?this.track(i,n,"".concat(e.destination_event_name,"::").concat(this.eventID),e.id):this.logger.warn("[Pinterest Pixel ".concat(this.tagId,"] Unknown event name: ").concat(e.destination_event_name))},t.prototype.advancedMatching=function(){var e=this.profileProperties.$email||this.profileProperties.$email_sha256;(null==e?void 0:e.length)&&window.pintrk("load",this.tagId,{em:e}),this.setForwardedProfileProperties({em:e})},t.prototype.parseProduct=function(e){return{value:e.price,currency:e.currency,product_name:e.name,product_id:"sku"===this.contentIdType?e.sku:"variant_id"===this.contentIdType?e.variant_id:e.product_id,product_variant_id:e.variant_id,product_variant:e.variant_name,product_price:e.price,product_quantity:e.quantity}},t.prototype.parseCheckout=function(e){var t,r,n=this;return{value:this.getConversionAmount(e),currency:e.currency,order_quantity:null===(t=e.items)||void 0===t?void 0:t.reduce((function(e,t){return e+t.quantity}),0),order_id:e.id,line_items:null===(r=e.items)||void 0===r?void 0:r.map((function(e){return n.parseProduct(e)}))}},t}(se),mt=function(){function e(){}return e.registerGA4sGTMConnection=function(e){var t,r,n,i=this;this.callback||(this.callback=(t=e,r=500,function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];clearTimeout(n),n=setTimeout((function(){return t.apply(void 0,v([],f(e),!1))}),r)}),this.callback(),ee.subscribe((function(){i.callback&&i.callback()})))},e}();function yt(e){return 2===e.version?!!e.config.use_sgtm:"sgtm"===e.config.connection_type}var _t=function(e,t){return new ne({dataLayerName:e.config.internal_converge_data_layer||t?"".concat(Y,"_").concat(e.connection_id):"dataLayer",sgtm:t,tagId:e.config.override_tag_id||e.config.measurement_id,utils:e.utils,logger:e.logger})},wt=function(e){function t(t,r){var n=e.call(this,t,r)||this,i=t.config;n.measurementId=i.measurement_id,n.itemIdType=i.item_id_type||"product_id",n.customForwarding=i.custom_ga4_events||[],n.connectionType=i.connection_type||"server",n.userProperties=i.user_properties||[],n.eventProperties=i.ga4_event_properties||[],n.itemProperties=i.ga4_item_properties||[],n.setUserId=!!i.set_user_id;var o=_t(t,yt(t));return n.dataLayerName=o.dataLayerName,n.isSgtm=yt(t),n.gtag=o.gtag.bind(o),n}return c(t,e),t.setup=function(e){_t(e,yt(e)).mount({page_location:e.browser.window.location.href,page_title:e.browser.document.title,send_page_view:!1,cvg_ga4_measurement_id_:e.config.measurement_id,cvg_cookie_urn:e.pixel.cookieUrn,cvg_public_token:e.pixel.publicToken,server_container_url:yt(e)?"".concat(m(y(window.__cvg_proxy_tracking)||"https://app.runconverge.com/api/tr"),"/sgtm"):void 0})},t.prototype.send=function(e,t,r){var n=u(u(u({},t),this.getCustomEventProperties()),{send_from:"converge",connection_type:this.isSgtm?"sgtm":"client"}),i=this.userId;i&&(n.user_id=i,this.setForwardedProfileProperties({user_id:i})),this.gtag("event",e,u(u({},n),{send_to:this.isSgtm?void 0:this.measurementId})),this.logEvent({forwardedEventName:e,forwardedProperties:n,method:"event",eventMappingId:r})},t.prototype.getCustomEventProperties=function(){var e=this;return u({},this.eventProperties.reduce((function(t,r){return t[r.forward]=e.properties[r.converge],t}),{}))},t.prototype.forward=function(){var e,t=this;if(this.setUserProperties(),"$page_load"===this.eventName)return this.send("page_view",{page_type:this.properties.page_type}),void("sgtm"===this.connectionType&&mt.registerGA4sGTMConnection((function(){return t.gtag("event","$identify")})));if("server"!==this.connectionType)switch(this.eventName){case"Viewed Product":this.send("view_item",this.parseProduct(this.properties));break;case"Logged In":this.send("login",{});break;case"Signed Up":this.send("sign_up",{});break;case"Selected Product":this.send("select_item",this.parseProduct(this.properties));break;case"Added To Cart":this.send("add_to_cart",this.parseProduct(this.properties));break;case"Added To Wishlist":this.send("add_to_wishlist",this.parseProduct(this.properties));break;case"Removed From Wishlist":this.send("remove_from_wishlist",this.parseProduct(this.properties));break;case"Removed From Cart":this.send("remove_from_cart",this.parseProduct(this.properties));break;case"Viewed Cart":this.send("view_cart",this.parseCheckout(this.properties));break;case"Started Checkout":this.send("begin_checkout",this.parseCheckout(this.properties));break;case"Searched":this.send("search",{search_term:this.properties.query});break;case"Viewed Collection":this.send("view_item_list",{item_list_id:this.properties.id,item_list_name:this.properties.name,items:null===(e=this.properties.items)||void 0===e?void 0:e.map(this.parseItem.bind(this))});break;case"Added Contact Info":this.send("add_contact_info",this.parseCheckout(this.properties));break;case"Added Shipping Info":this.send("add_shipping_info",this.parseCheckout(this.properties));break;case"Added Payment Info":this.send("add_payment_info",this.parseCheckout(this.properties));break;case"Placed Order":"sgtm"!==this.connectionType&&this.send("purchase",this.parseOrder(this.properties));break;case"Started Subscription":"sgtm"!==this.connectionType&&this.send("start_subscription",this.parseOrder(this.properties));break;default:this.trackCustomEvents()}},t.prototype.forwardWithMapping=function(e){var t,r,n=this;switch(this.setUserProperties(),this.eventName){case"$page_load":r={page_type:this.properties.page_type};break;case"Viewed Product":case"Selected Product":case"Added To Cart":case"Added To Wishlist":case"Removed From Wishlist":case"Removed From Cart":r=this.parseProduct(this.properties);break;case"Logged In":case"Signed Up":default:r={};break;case"Viewed Cart":case"Started Checkout":case"Added Contact Info":case"Added Shipping Info":case"Added Payment Info":r=this.parseCheckout(this.properties);break;case"Searched":r={search_term:this.properties.query};break;case"Viewed Collection":r={item_list_id:this.properties.id,item_list_name:this.properties.name,items:null===(t=this.properties.items)||void 0===t?void 0:t.map(this.parseItem.bind(this))};break;case"Placed Order":case"Started Subscription":r=this.parseOrder(this.properties)}this.send(e.destination_event_name,r,e.id),this.isSgtm&&mt.registerGA4sGTMConnection((function(){return n.gtag("event","$identify")}))},Object.defineProperty(t.prototype,"userId",{get:function(){if(2!==this.version&&"server"!==this.connectionType&&this.setUserId){var e=this.profileProperties.$customer_id;if(e){var t=e.toString();if(""!==t)return"customer_id:".concat(t)}}},enumerable:!1,configurable:!0}),t.prototype.setUserProperties=function(){var e=this,t=u({},this.userProperties.reduce((function(t,r){var n=r.profile_property;return t[r.ga4_property]=e.profileProperties[n],t}),{}));this.gtag("set","user_properties",t),this.setForwardedProfileProperties(t),this.setForwardedProfileProperties(ee.toObj())},t.prototype.getCustomItemProperties=function(e){return u({},this.itemProperties.reduce((function(t,r){return t[r.forward]=e[r.converge],t}),{}))},t.prototype.parseItem=function(e){return u({item_id:e[this.itemIdType],item_name:e.name,item_brand:e.vendor,item_variant:e.variant_id||e.variant_name,price:e.price,currency:e.currency,quantity:u({quantity:void 0},e).quantity},this.getCustomItemProperties(e))},t.prototype.parseProduct=function(e){return{value:e.price,currency:e.currency,items:[this.parseItem(e)]}},t.prototype.parseCheckout=function(e){var t,r;return{value:this.getConversionAmount(e),currency:e.currency,coupon:null===(t=e.coupon)||void 0===t?void 0:t.join(","),shipping:e.total_shipping,tax:e.total_tax,items:null===(r=e.items)||void 0===r?void 0:r.map(this.parseItem.bind(this))}},t.prototype.parseOrder=function(e){return u(u({},this.parseCheckout(e)),{transaction_id:e.id})},t.prototype.trackCustomEvents=function(){var e,t;try{for(var r=l(this.customForwarding),n=r.next();!n.done;n=r.next()){var i=n.value;"server"!==i.forward_from&&(i.converge_event_name===this.eventName&&this.send(i.ga4_event_name,{}))}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t}(se),bt=function(e){function t(t,r){var n=e.call(this,t,r)||this,i=t.config;return n.pixelCode=i.pixel_code,n.contentIdType=i.content_id_type||"default",n.customEvents=i.tiktok_custom_events||[],n}return c(t,e),t.setup=function(e){var t,r;if("undefined"!=typeof window){var n=e.utils,i=e.config;window.TiktokAnalyticsObject="ttq";var o=window.ttq=window.ttq||[];o._i=o._i||{},o._i[i.pixel_code]=[],o._i[i.pixel_code]._u="https://analytics.tiktok.com/i18n/pixel/events.js",o._t=o._t||{},o._t[i.pixel_code]=+new Date,o._o=o._o||{},o._o[i.pixel_code]={};var s=i.pixel_code,a=function(e){o[e]=function(){o._i[s].push([e].concat(Array.prototype.slice.call(arguments,0)))}};try{for(var c=l(["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"]),u=c.next();!u.done;u=c.next()){a(u.value)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}n.addScript("https://analytics.tiktok.com/i18n/pixel/events.js?sdkid=".concat(i.pixel_code),{id:"cvg-tiktok-".concat(i.pixel_code)})}},t.prototype.parsePhoneNumber=function(e){return e?e.replace(/[\s-]/g,""):void 0},t.prototype.advancedMatching=function(){var e=this.profileProperties,t={email:e.$email||void 0,phone_number:this.parsePhoneNumber(e.$phone_number)};window.ttq.identify(t),this.setForwardedProfileProperties(t)},t.prototype.forward=function(){var e=this.eventName,t=this.properties;switch(this.advancedMatching(),e){case"$page_load":this.page();break;case"Viewed Product":this.track("ViewContent",this.parseViewedProduct(t));break;case"Added To Cart":this.track("AddToCart",this.parseAddedToCart(t));break;case"Started Checkout":this.track("InitiateCheckout",this.parseCheckout(t));break;case"Added Payment Info":this.track("AddPaymentInfo",this.parseCheckout(t));break;case"Placed Order":this.track("CompletePayment",this.parseCheckout(t));break;case"Started Subscription":return void this.track("Subscribe",this.parseCheckout(this.properties));case"Searched":this.track("Search",this.parseSearched(t));break;case"Subscribed To Newsletter":this.track("CompleteRegistration",{})}this.fireCustomEvents()},t.prototype.forwardWithMapping=function(e){this.advancedMatching();var t=void 0;if("Page"!==e.destination_event_name){switch(this.eventName){case"$page_load":case"Subscribed To Newsletter":t={};break;case"Viewed Product":t=this.parseViewedProduct(this.properties);break;case"Added To Cart":t=this.parseAddedToCart(this.properties);break;case"Started Checkout":case"Added Payment Info":case"Placed Order":case"Started Subscription":t=this.parseCheckout(this.properties);break;case"Searched":t=this.parseSearched(this.properties);break;default:t=this.tryParseCustomEvent(this.properties)||{}}this.track(e.destination_event_name,t,e.id)}else this.page(e.id)},t.prototype.track=function(e,t,r){window.ttq.track(e,t,{event_id:this.eventID}),this.logEvent({forwardedEventName:e,forwardedProperties:t,forwardedEventID:this.eventID,method:"track",eventMappingId:r})},t.prototype.fireCustomEvents=function(){var e,t;try{for(var r=l(this.customEvents),n=r.next();!n.done;n=r.next()){var i=n.value;if(i.converge_event_name===this.eventName){var o=this.tryParseCustomEvent(this.properties);return void this.track(i.tiktok_event_name,o||{})}}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.page=function(e){window.ttq.page({event_id:this.eventID}),this.logEvent({forwardedEventName:"page",forwardedEventID:this.eventID,method:"page",eventMappingId:e})},t.prototype.getContentId=function(e){if("default"===this.contentIdType)return e.variant_id||e.product_id;if("product_id"===this.contentIdType)return e.product_id;if("variant_id"===this.contentIdType)return e.variant_id;if("sku"===this.contentIdType)return e.sku;throw new Error("Unknown content id type: ".concat(this.contentIdType))},t.prototype.getContentType=function(e){if("default"===this.contentIdType)return e.variant_id?"product":"product_group";if("product_id"===this.contentIdType)return"product_group";if("variant_id"===this.contentIdType)return"product";if("sku"===this.contentIdType)return"product";throw new Error("Unknown content id type: ".concat(this.contentIdType))},t.prototype.parseViewedProduct=function(e){return{currency:e.currency,value:e.price,content_type:this.getContentType(e),contents:[{content_id:this.getContentId(e),content_name:e.name,price:e.price,brand:e.vendor}]}},t.prototype.parseAddedToCart=function(e){return{currency:e.currency,value:e.price*(this.tryGetQuantity(e)||1),content_type:this.getContentType(e),contents:[{content_id:this.getContentId(e),content_name:e.name,quantity:e.quantity,price:e.price,brand:e.vendor}]}},t.prototype.parseSearched=function(e){return{query:e.query}},t.prototype.parseCheckout=function(e){var t,r=this;return{currency:e.currency,value:this.getConversionAmount(e),content_type:e.items?this.getContentType(e.items[0]):void 0,contents:null===(t=e.items)||void 0===t?void 0:t.map((function(e){return{content_id:r.getContentId(e),content_name:e.name,price:e.price,quantity:e.quantity,brand:e.vendor}}))}},t.prototype.tryGetQuantity=function(e){if(O(e)){var t=e.quantity;if("number"==typeof t)return t;if(void 0===t)return 1}},t.prototype.tryGetPrice=function(e){if("object"===o(e)&&null!==e){var t="price"in e?e.price:void 0;if("number"==typeof t)return t;if("string"==typeof t){var r=Number.parseFloat(t);if(!Number.isNaN(r))return r}}},t.prototype.tryGetContent=function(e){var t,r;if(O(e))return{content_id:this.getContentId(e),content_name:"name"in e?null===(t=e.name)||void 0===t?void 0:t.toString():void 0,price:this.tryGetPrice(e),quantity:this.tryGetQuantity(e),brand:"vendor"in e?null===(r=e.vendor)||void 0===r?void 0:r.toString():void 0}},t.prototype.tryParseCustomEvent=function(e){if(void 0!==e.total_price&&e.currency){var t=void 0,r=void 0;return Array.isArray(e.items)&&(t=e.items.map(this.tryGetContent.bind(this)).filter((function(e){return!!e})),r=this.getContentType(e.items[0]||{})),{currency:e.currency,value:this.tryGetConversionAmount(e),content_type:r,contents:t}}if(e.currency&&void 0!==e.price){var n=this.tryGetContent(e);r=this.getContentType(e);if(null==n?void 0:n.content_id)return{currency:e.currency,value:e.price,content_type:r,contents:[n]}}},t}(se),kt=function(e){function t(t,r){var n=e.call(this,t,r)||this,i=t.config;return n.accountId=i.account_id,n}return c(t,e),t.setup=function(e){if("undefined"!=typeof window){var t=e.config;e.utils.addScript("https://dynamic.criteo.com/js/ld/ld.js?a=".concat(t.account_id),{id:"cvg-criteo-".concat(t.account_id)})}},t.prototype.getDeviceType=function(){return/iPad/.test(navigator.userAgent)?"t":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Silk/.test(navigator.userAgent)?"m":"d"},t.prototype.forward=function(){if("$page_load"===this.eventName)this.viewedPage(this.properties,this.eventID)},t.prototype.forwardWithMapping=function(e){"viewPage"===e.destination_event_name&&this.viewedPage(this.properties,this.eventID,e.id)},t.prototype.viewedPage=function(e,t,r){var n=this.getDeviceType();window.criteo_q=window.criteo_q||[],window.criteo_q.push({event:"setAccount",account:this.accountId},{event:"setSiteType",type:n},{event:"viewPage"}),this.logEvent({forwardedEventName:"viewPage",forwardedProperties:{account:this.accountId,type:n},method:"event",eventMappingId:r})},t}(se),Ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.setup=function(e){if("undefined"!=typeof window){var t=e.utils,r=e.browser,n=e.config;t.addScript("https://static.ads-twitter.com/uwt.js",{id:"cvg-twitter"}),window.twq||(window.twq=function(){window.twq.exe?window.twq.exe.apply(window.twq,arguments):window.twq.queue.push(arguments)},window.twq.queue=[],window.twq.version="1.1"),window.twq("set",{page_location:r.document.location.href}),window.twq("config",n.pixel_id)}},t.prototype.track=function(e,t,r){var n={email_address:this.profileProperties.$email,phone_number:this.profileProperties.$phone_number};window.twq("event","tw-".concat(this.config.pixel_id,"-").concat(e),u(u(u({},t),{conversion_id:this.eventID}),n)),this.logEvent({forwardedEventName:e,forwardedProperties:t,forwardedProfileProperties:n,forwardedEventID:this.eventID,method:"event",eventMappingId:r})},t.prototype.forward=function(){var e=this.eventName,t=this.properties;switch(e){case"$page_load":this.config.page_view_id&&this.track(this.config.page_view_id,{});break;case"Viewed Product":this.config.viewed_product_id&&this.track(this.config.viewed_product_id,{value:t.price,currency:t.currency,contents:[this.parseContent(t)]});break;case"Added To Cart":this.config.added_to_cart_id&&this.track(this.config.added_to_cart_id,{value:t.price*t.quantity,currency:t.currency,contents:[this.parseContent(t)]});break;case"Started Checkout":this.config.started_checkout_id&&this.track(this.config.started_checkout_id,this.parseCheckout(t));break;case"Added Payment Info":this.config.added_payment_info_id&&this.track(this.config.added_payment_info_id,this.parseCheckout(t));break;case"Placed Order":this.config.placed_order_id&&this.track(this.config.placed_order_id,this.parseCheckout(t))}},t.prototype.forwardWithMapping=function(e){var t=void 0;switch(this.eventName){case"$page_load":default:t={};break;case"Viewed Product":t={value:this.properties.price,currency:this.properties.currency,contents:[this.parseContent(this.properties)]};break;case"Added To Cart":t={value:this.properties.price*this.properties.quantity,currency:this.properties.currency,contents:[this.parseContent(this.properties)]};break;case"Started Checkout":case"Added Payment Info":case"Placed Order":t=this.parseCheckout(this.properties)}this.track(e.destination_event_name,t||{},e.id)},t.prototype.parseContent=function(e){var t=e.quantity;return{content_id:e[this.config.twitter_content_id_type],content_group_id:e.product_id,content_name:e.name,content_price:Number(e.price),num_items:void 0!==t?Number(t):1}},t.prototype.parseCheckout=function(e){var t;return{value:this.getConversionAmount(e),currency:e.currency,contents:null===(t=e.items)||void 0===t?void 0:t.map(this.parseContent.bind(this))}},t}(se),It=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.setup=function(e){var t=this;if("undefined"!=typeof window){var r=e.config,n="".concat(r.account_id,"-").concat(r.project_id);window.convert?$((function(){return t.trackViewedConvertExperiment(e)})):e.utils.addScript("https://cdn-4.convertexperiments.com/js/".concat(n,".js"),{id:"cvg-convert-".concat(n),sync:!0,onLoad:function(){return t.trackViewedConvertExperiment(e)}})}},t.trackViewedConvertExperiment=function(e){var t=function(){var e=window.convert;if(e){var t=e.getCookie("_conv_s");if(("{}"!==JSON.stringify(e.currentData.experiments)||"{}"!==JSON.stringify(e.historicalData.experiments))&&t){var r=t.substring(t.lastIndexOf("sh:")+3,t.lastIndexOf("*")),n=[],i=[],o=void 0;if(e.currentData){var s=e.currentData.experiments;for(var a in s)o=s[a].variation_id,n.includes(e.data.experiments[a].id)||(n.push(e.data.experiments[a].id),i.push(o))}if(e.historicalData){var c=e.historicalData.experiments;for(var a in c)o=c[a].variation_id,n.includes(e.data.experiments[a].id)||(n.push(e.data.experiments[a].id),i.push(o))}return{cid:e.data.u_id,pid:e.data.prj.id,vid:r,vars:i,exps:n,seg:e.getVisitorSegments()}}}}();if(t&&0!==Object.keys(t).length){var r=Object.fromEntries(Object.entries(t).map((function(e){var t=f(e,2),r=t[0],n=t[1];return["$convert_".concat(r),n]})));e.pixel.track({method:"track",eventName:"Viewed Convert Experiment",profileProperties:r})}},t}(se),Pt=function(e){function t(t,r){var n=e.call(this,t,r)||this,i=t.config;return n.publicToken=i.public_token,n}return c(t,e),t.prototype.forward=function(){if(this.shouldSendBrowserEvents())switch(this.eventName){case"$page_load":this.config.viewed_page_event&&this.loadScript();break;case"Viewed Product":this.config.viewed_product_event&&this.track(this.config.viewed_product_event,this.parseProduct(this.properties));break;case"Added To Cart":this.config.added_to_cart_event&&this.track(this.config.added_to_cart_event,this.parseLineItem(this.properties));break;case"Started Checkout":this.config.started_checkout_event&&this.track(this.config.started_checkout_event,this.parseCheckout(this.properties))}},t.prototype.forwardWithMapping=function(e){var t;if("__activity__"!==e.destination_event_name){switch(this.eventName){case"$page_load":return void(t={});case"Viewed Product":t=this.parseProduct(this.properties);break;case"Added To Cart":t=this.parseLineItem(this.properties);break;case"Started Checkout":t=this.parseCheckout(this.properties);break;default:t={}}this.track(e.destination_event_name,t,e.id)}else this.loadScript(e.id)},t.prototype.shouldSendBrowserEvents=function(){return null==this.config.send_browser_events||(!!this.config.send_browser_events||!!this.config.duplicate_browser_server_events)},t.prototype.isIdentified=function(){return p(this,void 0,void 0,(function(){var e,t,r,n;return h(this,(function(i){switch(i.label){case 0:return(e=this.utils.getURLParameterByName("_kx"))&&e.length>0?[2,!0]:[4,this.browser.getCookie("__kla_id")];case 1:t=i.sent();try{if(0===(r=atob(t)).length)return[2,!1];if(null==(n=JSON.parse(r))?void 0:n.$exchange_id)return[2,!0]}catch(e){this.logger.error("Could not decode klaID",e)}return[2,!1]}}))}))},t.prototype.loadScript=function(e){var t=this;this.utils.addScript("https://static.klaviyo.com/onsite/js/klaviyo.js?company_id=".concat(this.publicToken),{id:"cvg-klaviyo-".concat(this.publicToken),onLoad:function(){t.isIdentified().then((function(r){r&&t.logEvent({forwardedEventName:"__activity__",method:"load-script",eventMappingId:e})}))}})},t.prototype.constructEventID=function(){return this.config.duplicate_browser_server_events?"".concat(this.eventID,"::client"):this.eventID},t.prototype.track=function(e,t,r){var n=this;window.klaviyo=window.klaviyo||[];var i=u(u({$event_id:this.constructEventID()},t),{connection:"browser",sent_from:"converge"});window.klaviyo.push(["track",e,i]),this.isIdentified().then((function(t){t&&n.logEvent({forwardedEventName:e,forwardedProperties:i,method:"track",eventMappingId:r})}))},t.prototype.parseLineItem=function(e){return u(u({$value:e.price*e.quantity},this.parseProduct(e)),{Quantity:e.quantity})},t.prototype.parseProduct=function(e){return{Name:e.name,VariantName:e.variant_name,ProductID:e.product_id,VariantID:e.variant_id,SKU:e.sku,Brand:e.vendor,Price:this.formatCurrency(e.price,e.currency),Currency:e.currency,URL:e.url,ImageURL:e.image_url}},t.prototype.parseCheckout=function(e){var t,r=this,n=this.getConversionAmount(e);return{$value:n,ItemNames:e.items.map((function(e){return e.name})),Brands:e.items.map((function(e){return e.vendor})),DiscountCode:null===(t=e.coupon)||void 0===t?void 0:t.join(","),TotalValue:this.formatCurrency(n,e.currency),DiscountValue:this.formatCurrency(e.total_discount,e.currency),TaxValue:this.formatCurrency(e.total_tax,e.currency),ShippingValue:this.formatCurrency(e.total_shipping,e.currency),Currency:e.currency,Items:e.items.map((function(e){var t=r.parseLineItem(e);return t.$value,d(t,["$value"])}))}},t.prototype.formatCurrency=function(e,t){return void 0===e||void 0===t?e:new Intl.NumberFormat(navigator.language,{style:"currency",currency:t}).format(e)},t}(se),St=["PageVisit","ViewContent","Search","AddToCart","AddToWishlist","Purchase","Lead","SignUp"],Et=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.setup=function(e){if("undefined"!=typeof window){var t=e.utils;e.browser;var r=e.config;t.addScript("https://www.redditstatic.com/ads/pixel.js",{id:"cvg-reddit"}),window.rdt||(window.rdt=function(){window.rdt.sendEvent?window.rdt.sendEvent.apply(window.rdt,arguments):window.rdt.callQueue.push(arguments)},window.rdt.callQueue=[]),window.rdt("init",r.account_id)}},t.prototype.track=function(e,t,r){var n=u(u({},t),{conversionId:this.eventID});window.rdt("track",e,n),this.logEvent({forwardedEventName:e,forwardedProperties:n,forwardedEventID:this.eventID,method:"track",eventMappingId:r})},t.prototype.forward=function(){var e=this.eventName,t=this.properties;switch(e){case"$page_load":this.track("PageVisit");break;case"Viewed Product":this.track("ViewContent",this.parseProduct(t));break;case"Added To Wishlist":this.track("AddToWishlist",this.parseLineItem(t));break;case"Added To Cart":this.track("AddToCart",this.parseLineItem(t));break;case"Subscribed To Newsletter":this.track("Lead");break;case"Searched":this.track("Search");break;case"Started Checkout":this.track("Custom",u({customEventName:"InitiateCheckout"},this.parseCheckout(t)));break;case"Added Payment Info":this.track("Custom",u({customEventName:"AddPaymentInfo"},this.parseCheckout(t)));break;case"Placed Order":this.track("Purchase",this.parseCheckout(t))}this.trackCustomEvents()},t.prototype.forwardWithMapping=function(e){var t=void 0;switch(this.eventName){case"$page_load":case"Subscribed To Newsletter":case"Searched":default:t={};break;case"Viewed Product":t=this.parseProduct(this.properties);break;case"Added To Wishlist":case"Added To Cart":t=this.parseLineItem(this.properties);break;case"Started Checkout":case"Added Payment Info":case"Placed Order":t=this.parseCheckout(this.properties)}if(!St.includes(e.destination_event_name)){var r=u({customEventName:e.destination_event_name},t);this.track("Custom",r,e.id)}else this.track(e.destination_event_name,t,e.id)},t.prototype.trackCustomEvents=function(){var e,t;try{for(var r=l(this.config.reddit_custom_events||[]),n=r.next();!n.done;n=r.next()){var i=n.value;i.converge_event_name===this.eventName&&this.track("Custom",{customEventName:i.reddit_event_name})}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.getContentId=function(e){return"variant_id"===this.config.content_id_type?e.variant_id:"sku"===this.config.content_id_type?e.sku:e.product_id},t.prototype.parseContent=function(e){return{id:this.getContentId(e),category:"all",name:e.name}},t.prototype.parseCheckout=function(e){var t,r,n=e.currency,i=this.getConversionAmount(e);if(this.config.currency){var o=D(i,n,this.config.currency);o&&(i=o,n=this.config.currency)}return{currency:n,value:i,itemCount:null===(t=e.items)||void 0===t?void 0:t.reduce((function(e,t){return e+(t.quantity||1)}),0),products:null===(r=e.items)||void 0===r?void 0:r.map(this.parseContent.bind(this))}},t.prototype.parseProduct=function(e){return{products:[this.parseContent(e)]}},t.prototype.parseLineItem=function(e){var t=e.currency,r=Number(e.price)*(e.quantity||1);if(this.config.currency){var n=D(r,t,this.config.currency);n&&(r=n,t=this.config.currency)}return{value:r,currency:t,itemCount:e.quantity||1,products:[this.parseContent(e)]}},t}(se),Tt=function(){function e(e){this.pixelId=e.config.pixel_id,this.logger=e.logger,this.eventLogger=e.connectionEventLogger,this.publicToken=e.publicToken,this.browser=e.browser,this.utils=e.utils}return e.prototype.mount=function(){"undefined"!=typeof window&&(window.snaptr=window.snaptr||function(){window.snaptr.handleRequest?window.snaptr.handleRequest.apply(window.snaptr,arguments):window.snaptr.queue.push(arguments)},window.snaptr.queue=[],window.snaptr("init",this.pixelId),this.utils.addScript("https://sc-static.net/scevent.min.js",{id:"cvg-snapchat"}),this.logger.debug("[Snapchat Pixel ".concat(this.pixelId,"] Initialized")))},e}(),xt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.setup=function(e){new Tt(e).mount()},t.prototype.track=function(e,t,r){window.snaptr("track",e,u(u(u({},t),this.forwardedProfileProperties),{client_dedup_id:this.eventID})),this.logEvent({forwardedEventName:e,forwardedEventID:this.eventID,forwardedProperties:t,method:"track",eventMappingId:r})},t.prototype.advancedMatching=function(e){var t=e.$email,r=e.$email_sha256,n=e.$phone_number,i=e.$phone_number_sha256,o=e.$first_name,s=e.$last_name,a=e.$city,c=e.$state,u=e.$zip_code,d=e.$country_code;this.setForwardedProfileProperties({user_email:t,user_hashed_email:r,user_phone_number:n,user_hashed_phone_number:i,firstname:o,lastname:s,geo_city:a,geo_region:c,geo_postal_code:u,geo_country:d})},t.prototype.forward=function(){switch(this.advancedMatching(this.profileProperties),this.eventName){case"$page_load":return void this.track("PAGE_VIEW");case"Viewed Product":return void this.track("VIEW_CONTENT",this.parseViewedProduct(this.properties));case"Viewed Collection":return void this.track("LIST_VIEW",this.parseViewedCollection(this.properties));case"Logged In":return void this.track("LOGIN");case"Signed Up":return void this.track("SIGN_UP");case"Added To Cart":return void this.track("ADD_CART",this.parseAddedToCart(this.properties));case"Added To Wishlist":return void this.track("ADD_TO_WISHLIST",this.parseAddedToCart(this.properties));case"Started Checkout":return void this.track("START_CHECKOUT",this.parseCheckout(this.properties));case"Added Payment Info":return void this.track("ADD_BILLING",this.parseCheckout(this.properties));case"Placed Order":return void this.track("PURCHASE",this.parsePlacedOrder(this.properties));case"Started Subscription":return void this.track("SUBSCRIBE",this.parseStartedSubscription(this.properties));case"Searched":return void this.track("SEARCH",this.parseSearched(this.properties))}this.fireCustomEvents()},t.prototype.forwardWithMapping=function(e){var t;switch(this.advancedMatching(this.profileProperties),this.eventName){case"$page_load":case"Logged In":case"Signed Up":default:t=void 0;break;case"Viewed Product":t=this.parseViewedProduct(this.properties);break;case"Viewed Collection":t=this.parseViewedCollection(this.properties);break;case"Added To Cart":case"Added To Wishlist":t=this.parseAddedToCart(this.properties);break;case"Started Checkout":case"Added Payment Info":t=this.parseCheckout(this.properties);break;case"Placed Order":t=this.parsePlacedOrder(this.properties);break;case"Started Subscription":t=this.parseStartedSubscription(this.properties);break;case"Searched":t=this.parseSearched(this.properties)}this.track(e.destination_event_name,t,e.id)},t.prototype.getContentId=function(e){if("product_id"===this.config.content_id_type)return e.product_id;if("variant_id"===this.config.content_id_type)return e.variant_id;if("sku"===this.config.content_id_type)return e.sku;throw new Error("Unknown item id type: ".concat(this.config.content_id_type))},t.prototype.fireCustomEvents=function(){var e,t;try{for(var r=l(this.config.snapchat_custom_events||[]),n=r.next();!n.done;n=r.next()){var i=n.value;if(i.converge_event_name===this.eventName)return void this.track(i.snapchat_event_name)}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.parseViewedProduct=function(e){return{currency:e.currency,price:e.price,item_ids:[this.getContentId(e)]}},t.prototype.parseViewedCollection=function(e){var t;return{item_ids:null===(t=e.items)||void 0===t?void 0:t.map(this.getContentId.bind(this))}},t.prototype.parseAddedToCart=function(e){var t=e.quantity||1;return{currency:e.currency,price:e.price*t,item_ids:[this.getContentId(e)],number_items:t}},t.prototype.parseSearched=function(e){return{search_string:e.query}},t.prototype.parseCheckout=function(e){var t,r;return{currency:e.currency,price:this.getConversionAmount(e),item_ids:null===(t=e.items)||void 0===t?void 0:t.map(this.getContentId.bind(this)),number_items:null===(r=e.items)||void 0===r?void 0:r.reduce((function(e,t){return e+t.quantity}),0)}},t.prototype.parsePlacedOrder=function(e){return u(u({},this.parseCheckout(e)),{transaction_id:e.id})},t.prototype.parseStartedSubscription=function(e){return u(u({},this.parseCheckout(e)),{transaction_id:e.id})},t}(se),Nt=["AUD","BRL","CAD","CHF","DKK","EUR","GBP","NOK","PLN","SEK","USD"],At=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.setup=function(e){var t=e.config;e.utils.addScript("https://www.dwin1.com/".concat(t.advertiser_id,".js"),{id:"cvg-awin-".concat(t.advertiser_id)})},t.prototype.forward=function(){var e,t,r;try{for(var n=l(null!==(r=this.config.event_names)&&void 0!==r?r:[]),i=n.next();!i.done;i=n.next()){i.value===this.eventName&&this.track()}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.forwardWithMapping=function(e){this.track(e.id)},t.prototype.track=function(e){var t=this.parseCheckout(this.properties),r=this.parseBasketItems(this.properties);this.send(t,r,e)},t.prototype.send=function(e,t,r){var n,i,o,s,a,c;this.trackBasket(t),window.AWIN=window.AWIN||{},window.AWIN.Tracking=window.AWIN.Tracking||{},window.AWIN.Tracking.Sale=e,null===(i=(n=window.AWIN.Tracking).run)||void 0===i||i.call(n);try{var d=new URLSearchParams(u(u({tt:"ns",tv:"2",merchant:this.config.advertiser_id,amount:e.amount,ch:e.channel,parts:e.parts,ref:e.orderRef,cr:e.currency,vc:null!==(o=e.voucher)&&void 0!==o?o:"",testmode:e.test},null!==(s=t.reduce((function(e,t,r){return e["bd[".concat(r,"]")]=encodeURIComponent(t),e}),{}))&&void 0!==s?s:{}),null!==(c=null===(a=e.custom)||void 0===a?void 0:a.reduce((function(e,t,r){return e["p".concat(r+1)]=t,e}),{}))&&void 0!==c?c:{}));new Image(0,0).src="https://www.awin1.com/sread.img?".concat(d.toString())}catch(e){this.logger.error("Failed to create AWIN pixel",e)}this.logEvent({forwardedEventName:this.eventName,forwardedEventID:e.orderRef,forwardedProperties:e,method:"event",eventMappingId:r})},t.prototype.trackBasket=function(e){var t=document.getElementById("aw_basket");if(!t){var r=document.createElement("form");r.name="aw_basket_form",r.style.display="none",document.body.appendChild(r),(t=document.createElement("textarea")).id="aw_basket",t.wrap="physical",r.appendChild(t)}t.value=e.join("\r\n")},t.prototype.parseCheckout=function(e){var t,r=f(this.getConversionAmountAndCurrency(e),2),n=r[0],i=r[1];return{amount:n.toFixed(2),channel:this.channel,currency:i,custom:this.getCustomParameters(),orderRef:encodeURIComponent(this.eventID),parts:"DEFAULT:".concat(n.toFixed(2)),test:this.config.test_mode?"1":"0",voucher:(null===(t=e.coupon)||void 0===t?void 0:t[0])?encodeURIComponent(e.coupon[0]):void 0}},t.prototype.parseBasketItems=function(e){var t,r,n=this;return null!==(r=null===(t=e.items)||void 0===t?void 0:t.map((function(e){var t,r;return["AW:P",n.config.advertiser_id,n.eventID,e.product_id,null!==(t=e.name)&&void 0!==t?t:"",Number(e.price).toFixed(2),e.quantity,null!==(r=e.sku)&&void 0!==r?r:"","DEFAULT",""].join("|")})))&&void 0!==r?r:[]},t.prototype.getConversionAmountAndCurrency=function(e){var t=this.getConversionAmount(e);return Nt.includes(e.currency)?[t,e.currency]:[D(t,e.currency,"USD"),"USD"]},t.prototype.getCustomParameters=function(){var e,t,r=this;return v([this.eventName],f(null!==(t=null===(e=this.config.custom_parameters)||void 0===e?void 0:e.flatMap((function(e){var t=r.properties[e];return Array.isArray(t)?t.filter((function(e){return null!=e})).map((function(e){return String(e)})):null!=t?[String(t)]:[]})))&&void 0!==t?t:[]),!1)},Object.defineProperty(t.prototype,"channel",{get:function(){var e,t,r,n,i,o,s;return(null===(e=this.profileProperties)||void 0===e?void 0:e.$awin_channel)?null===(t=this.profileProperties)||void 0===t?void 0:t.$awin_channel:"awin"===(null===(r=this.pixel.sessionProperties)||void 0===r?void 0:r.cvg_source)||"awin"===(null===(n=this.pixel.sessionProperties)||void 0===n?void 0:n.utm_source)||(null===(i=this.pixel.sessionProperties)||void 0===i?void 0:i.awc)||(null===(s=null===(o=this.pixel.sessionProperties)||void 0===o?void 0:o.$url)||void 0===s?void 0:s.includes("source=aw"))?"aw":"other"},enumerable:!1,configurable:!0}),t}(se),Dt=function(e){function t(t,r){var n=e.call(this,t,r)||this,i=t.config;return n.itemIdType=i.item_id_type||"product_id",n}return c(t,e),t.setup=function(e){if("undefined"!=typeof window){var t=e.utils;e.browser;var r=e.config;t.addScript("https://s.axon.ai/pixel.js",{id:"cvg-applovin"}),A()||t.addScript("https://c.albss.com/p/l/loader.iife.js",{id:"cvg-applovin2"}),window.axon||(window.axon=function(){window.axon.performOperation?window.axon.performOperation.apply(window.axon,arguments):window.axon.operationQueue.push(arguments)},window.axon.operationQueue=[],window.axon.ts=Date.now(),window.axon.eventKey=r.event_key),window.axon("init")}},t.prototype.forward=function(){var e=this.eventName,t=this.properties;switch(e){case"$page_load":this.send("page_view",void 0);break;case"Viewed Product":this.send("view_item",this.parseViewedProduct(t));break;case"Added To Cart":this.send("add_to_cart",this.parseProduct(this.properties));break;case"Removed From Cart":this.send("remove_from_cart",this.parseProduct(this.properties));break;case"Started Checkout":this.send("begin_checkout",this.parseCheckout(this.properties));break;case"Searched":this.send("search",{search_term:this.properties.query});break;case"Added Payment Info":this.send("add_payment_info",this.parseCheckout(this.properties));break;case"Placed Order":this.send("purchase",this.parseOrder(this.properties))}},t.prototype.forwardWithMapping=function(e){var t=void 0;switch(this.eventName){case"$page_load":t=void 0;break;case"Viewed Product":t=this.parseViewedProduct(this.properties);break;case"Added To Cart":case"Removed From Cart":t=this.parseProduct(this.properties);break;case"Started Checkout":case"Added Payment Info":t=this.parseCheckout(this.properties);break;case"Searched":t={search_term:this.properties.query};break;case"Placed Order":t=this.parseOrder(this.properties)}this.send(e.destination_event_name,t,e.id)},t.prototype.send=function(e,t,r){window.axon("track",e,t),this.logEvent({forwardedEventName:e,forwardedProperties:t,method:"event",eventMappingId:r})},t.prototype.parseViewedProduct=function(e){return{currency:e.currency,items:[this.parseItem(e)],value:e.price}},t.prototype.parseProduct=function(e){return{currency:e.currency,items:[this.parseItem(e)],value:e.price}},t.prototype.parseCheckout=function(e){return{currency:e.currency,items:e.items.map(this.parseItem.bind(this)),value:this.getConversionAmount(e)}},t.prototype.parseOrder=function(e){return u(u({},this.parseCheckout(e)),{shipping:e.total_shipping,tax:e.total_tax,transaction_id:e.id})},t.prototype.parseItem=function(e){return{item_variant_id:e.variant_id,item_id:this.getItemId(e),item_name:e.name||"",price:e.price,quantity:"quantity"in e?e.quantity:1,image_url:e.image_url,item_variant:e.variant_id||e.variant_name,discount:"discount"in e?e.discount:void 0,item_brand:e.vendor}},t.prototype.getItemId=function(e){if("product_id"===this.itemIdType)return e.product_id;if("variant_id"===this.itemIdType)return e.variant_id||"";if("sku"===this.itemIdType)return e.sku||"";throw new Error("Invalid item_id_type ".concat(this.itemIdType))},t}(se),Ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.forward=function(){this.logger.info("forward",{eventName:this.eventName,eventID:this.eventID,properties:this.properties,profileProperties:this.profileProperties}),this.logEvent({forwardedEventName:this.eventName,forwardedEventID:this.eventID,forwardedProperties:u(u({},this.properties),this.profileProperties)})},t.prototype.forwardWithMapping=function(e){this.logger.info("forwardWithMapping",{mapping:e,properties:this.properties,profileProperties:this.profileProperties});var t="*"!==e.destination_event_name?e.destination_event_name:"*"!==e.event_name?e.event_name:this.eventName;this.logEvent({forwardedEventName:t,forwardedEventID:this.eventID,forwardedProperties:u(u({},this.properties),this.profileProperties),eventMappingId:e.id})},t}(se),Lt=function(e){return new ne({dataLayerName:e.config.internal_converge_data_layer?Y:"dataLayer",tagId:e.config.tag_id,utils:e.utils,logger:e.logger})},qt=function(e){function t(t,r){var n=e.call(this,t,r)||this,i=t.config;n.tagId=i.tag_id,n.conversions=i.conversions||[],n.itemIdType=i.item_id_type||"product_id";var o=Lt(t);return n.gtag=o.gtag.bind(o),n}return c(t,e),t.setup=function(e){Lt(e).mount({allow_enhanced_conversions:!0})},t.prototype.forward=function(){this.setUserData(),this.trackConversions()},t.prototype.forwardV2=function(){this.setUserData(),e.prototype.forwardV2.call(this)},t.prototype.forwardWithMapping=function(e){var t=u(u({},this.getConversionProperties(this.properties)),{transaction_id:this.eventID});this.gtag("event","conversion",u({send_to:e.destination_event_name},t)),this.logEvent({forwardedEventName:e.destination_event_name,forwardedProperties:t,forwardedEventID:this.eventID,method:"conversion",eventMappingId:e.id})},t.prototype.trackConversions=function(){var e,t,r=this,n=r.eventName,i=r.properties,o=r.eventID;try{for(var s=l(this.conversions),a=s.next();!a.done;a=s.next()){var c=a.value;if(!c.server&&n===c.event_name&&c.conversion_id.length>0){var d=u(u({},this.getConversionProperties(i)),{transaction_id:o}),p=c.measurement_id?"".concat(c.measurement_id,"/").concat(c.conversion_id):"".concat(this.tagId,"/").concat(c.conversion_id);this.gtag("event","conversion",u({send_to:p},d)),this.logEvent({forwardedEventName:p,forwardedProperties:d,forwardedEventID:o,method:"conversion"})}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}},t.prototype.getItemId=function(e){if("product_id"===this.itemIdType)return e.product_id;if("variant_id"===this.itemIdType)return e.variant_id;if("sku"===this.itemIdType)return e.sku;throw new Error("Invalid item_id_type ".concat(this.itemIdType))},t.prototype.getConversionProperties=function(e){var t,r=this;return{currency:e.currency,discount:e.total_discount,event:"Placed Order"===this.eventName?"purchase":void 0,items:(null!==(t=e.items)&&void 0!==t?t:[]).map((function(e){if("object"===o(e)){var t=r.getItemId(e);if(t)return{id:t,price:e.price,quantity:e.quantity,currency:e.currency}}})).filter(Boolean),value:this.tryGetConversionAmount(e)}},t.prototype.setUserData=function(){var e=this.profileProperties,t={email:e.$email,phone_number:e.$phone_number,address:{first_name:e.$first_name,last_name:e.$last_name,street:e.$street,city:e.$city,region:e.$state,postal_code:e.$zip_code,country:e.$country_code}};this.gtag("set","user_data",t),this.setForwardedProfileProperties(t),this.setForwardedProfileProperties(ee.toObj())},t}(se),$t=function(e){return new ne({dataLayerName:e.config.internal_converge_data_layer?Y:"dataLayer",tagId:e.config.tag_id,utils:e.utils,logger:e.logger})},Ut=function(e){function t(t,r){var n=e.call(this,t,r)||this,i=t.config;n.tagId=i.tag_id,n.itemIdType=i.item_id_type||"product_id",n.customEvents=i.custom_google_ads_events||[];var o=$t(t);return n.gtag=o.gtag.bind(o),n}return c(t,e),t.setup=function(e){$t(e).mount({allow_enhanced_conversions:!0})},t.prototype.send=function(e,t,r){this.gtag("event",e,u(u({},t),{send_to:this.tagId,send_from:"converge"})),this.logEvent({forwardedEventName:e,forwardedProperties:t,method:"event",eventMappingId:r})},t.prototype.forward=function(){var e,t,r=this.eventName,n=this.properties;switch(r){case"Viewed Product":this.send("view_item",{value:n.price,currency:n.currency,items:[this.parseItem(n)]});break;case"Selected Product":this.send("select_item",{value:n.price,currency:n.currency,items:[this.parseItem(n)]});break;case"Viewed Collection":this.send("view_item_list",{items:null===(e=n.items)||void 0===e?void 0:e.map(this.parseItem.bind(this))});break;case"Added To Cart":this.send("add_to_cart",{value:n.price,currency:n.currency,items:[this.parseItem(n)]});break;case"Removed From Cart":this.send("remove_from_cart",{value:n.price,currency:n.currency,items:[this.parseItem(n)]});break;case"Added To Wishlist":this.send("add_to_wishlist",{value:n.price,currency:n.currency,items:[this.parseItem(n)]});break;case"Removed From Wishlist":this.send("remove_from_wishlist",{value:n.price,currency:n.currency,items:[this.parseItem(n)]});break;case"Searched For Store":this.send("search",{value:null===(t=n.product)||void 0===t?void 0:t.price,currency:null==n?void 0:n.currency,location:n.query,items:n.product&&[this.parseItem(n.product)]});break;case"Viewed Cart":this.send("view_cart",this.parseCheckout(n));break;case"Started Checkout":this.send("begin_checkout",this.parseCheckout(n));break;case"Added Payment Info":this.send("add_payment_info",this.parseCheckout(n));break;case"Placed Order":this.send("purchase",this.parseCheckout(n))}this.fireCustomEvents()},t.prototype.forwardWithMapping=function(e){var t,r,n,i=this.eventName,o=this.properties;switch(i){case"Viewed Product":case"Selected Product":case"Added To Cart":case"Removed From Cart":case"Added To Wishlist":case"Removed From Wishlist":n={value:o.price,currency:o.currency,items:[this.parseItem(o)]};break;case"Viewed Collection":n={items:null===(t=o.items)||void 0===t?void 0:t.map(this.parseItem.bind(this))};break;case"Searched For Store":n={value:null===(r=o.product)||void 0===r?void 0:r.price,currency:null==o?void 0:o.currency,location:o.query,items:o.product&&[this.parseItem(o.product)]};break;case"Viewed Cart":case"Started Checkout":case"Added Payment Info":case"Placed Order":n=this.parseCheckout(o);break;default:n={value:this.tryGetConversionAmount(this.properties),currency:this.properties.currency,items:[{id:this.getItemId(this.properties),google_business_vertical:"retail"}]}}this.send(e.destination_event_name,n,e.id)},t.prototype.fireCustomEvents=function(){var e,t;try{for(var r=l(this.customEvents),n=r.next();!n.done;n=r.next()){var i=n.value;this.eventName===i.event_name&&this.send(i.google_ads_event_name,{value:this.tryGetConversionAmount(this.properties),currency:this.properties.currency,items:[{id:this.getItemId(this.properties),google_business_vertical:"retail"}]})}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype.getItemId=function(e){if("product_id"===this.itemIdType)return e.product_id;if("variant_id"===this.itemIdType)return e.variant_id;if("sku"===this.itemIdType)return e.sku;throw new Error("Invalid item_id_type ".concat(this.itemIdType))},t.prototype.parseItem=function(e){return{id:this.getItemId(e),google_business_vertical:"retail"}},t.prototype.parseCheckout=function(e){var t;return{value:this.getConversionAmount(e),currency:e.currency,items:null===(t=e.items)||void 0===t?void 0:t.map(this.parseItem.bind(this))}},t}(se),Rt=function(e){switch(e.app){case"fb":return Qe;case"google_ads":return ft;case"google_ads_conversions":return qt;case"google_ads_remarketing":return Ut;case"pinterest":return gt;case"ga4":return wt;case"tiktok":return bt;case"criteo":return kt;case"twitter":return Ct;case"custom_html":return ht;case"convert":return It;case"bing":return pe;case"klaviyo":return Pt;case"reddit":return Et;case"snapchat":return xt;case"awin":return At;case"applovin":return Dt;case"dummy":return Ot;default:return}},Mt=["equals","contains","starts_with","ends_with"];var Vt,Ft=function(){function e(e,t,r){this.actual=e,this.expected=t,r.startsWith("not_")?(this.comparison=r.substring(4),this.inverted=!0):(this.comparison=r,this.inverted=!1)}return e.prototype.matches=function(e,t){var r=function(e,t,r){switch(Mt.includes(r)&&(e=String(e).toLowerCase(),t=String(t).toLowerCase()),r){case"equals":case"equals_exactly":return String(e)===String(t);case"regexp":return!!String(e).match(new RegExp(t));case"regexp_ignore_case":return!!String(e).match(new RegExp(t,"i"));case"lower_than":return e<t;case"lower_than_or_equals":return e<=t;case"greater_than":return e>t;case"greater_than_or_equals":return e>=t;case"contains":return String(e).includes(String(t));case"starts_with":return String(e).startsWith(String(t));case"ends_with":return String(e).endsWith(String(t));case"matches_css_selector":return!!(e instanceof Element&&t)&&e.matches(String(t))}}(this.actual.getValue(e,t),this.expected.getValue(e,t),this.comparison);return this.inverted?!r:r},e.fromConfig=function(t){return new e(jt.fromConfig(t.actual),jt.fromConfig(t.expected),t.comparison)},e}(),jt=function(){function e(){}return e.fromConfig=function(e){switch(e.type){case"constant":return new Gt(e.value);case"property":return new Wt(e.value)}},e}(),Gt=function(e){function t(t){var r=e.call(this)||this;return r.value=t,r}return c(t,e),t.prototype.getValue=function(){return this.value},t}(jt),Wt=function(e){function t(t){var r=e.call(this)||this;return r.path=t,r}return c(t,e),t.prototype.getValue=function(e,t){if(this.path in e)return e[this.path];var r=t.pixel.browser;return{pageUrl:r.window.location.href,pageHostname:r.window.location.hostname,pagePath:r.window.location.pathname,pageReferrer:r.document.referrer}[this.path]},t}(jt),Bt=function(){function e(e,t){this.container=t,this.eventName=e.eventName,this.triggers=e.triggers}return e.prototype.fireEvent=function(){this.container.pixel.track({eventName:this.eventName,method:"track"})},e}();function Kt(e){return e?Array.from(e.classList).join(","):null}function Ht(e){if(!e)return null;var t=e.innerText||e.textContent||"";return(t=t.replace(/([\s\uFEFF\xA0])+/g," ").replace(/(\s)+/g," ")).trim()}function Qt(e,t){if(t instanceof HTMLElement){var r=t.tagName,n=t.id?"#".concat(t.id):"",i=v([],f(t.classList),!1).map((function(e){return".".concat(e)})).join("");return"".concat(r).concat(n).concat(i)}return t}!function(e){e.AllElementsClick="AllElementsClick",e.AllLinksClick="AllLinksClick",e.FormSubmit="FormSubmit",e.PageView="PageView",e.Timer="Timer",e.Video="Video"}(Vt||(Vt={}));var Jt=function(){function e(e,t){this.conditions=e.conditions,this.container=t,this.id=e.id,this.type=e.type}return e.prototype.matches=function(e){var t=this;return this.conditions.every((function(r){return r.matches(e,t.container)}))},e.prototype.triggerEvent=function(e){if(this.matches(e)){this.container.trigger(this.id);try{this.container.pixel.logger.debug("[".concat(this.type,"] [id: ").concat(this.id,"] triggered with ").concat(JSON.stringify(e,Qt)))}catch(e){this.container.pixel.logger.debug("[".concat(this.type,"] [id: ").concat(this.id,"] triggered"))}}},e}(),Zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setup=function(){var e=this;$((function(){document.body.addEventListener("click",(function(t){var r=e.getTarget(t);r&&e.triggerEvent({clickElement:r,clickElementClasses:Kt(r),clickElementId:r.getAttribute("id"),clickElementTarget:r.getAttribute("target"),clickElementUrl:r.getAttribute("href"),clickElementText:Ht(r)})}))}))},t}(Jt),Yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.getTarget=function(e){var t=e.target;return t instanceof Element?t:null},t}(Zt),zt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.getTarget=function(e){return e.target instanceof Element?e.target.closest("a"):null},t}(Zt),Xt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setup=function(){var e=this;$((function(){document.body.addEventListener("submit",(function(t){var r=t.target;r&&r instanceof HTMLFormElement&&e.triggerEvent({formElement:r,formElementAction:r.getAttribute("action"),formElementClasses:Kt(r),formElementId:r.getAttribute("id"),formElementMethod:r.getAttribute("method"),formElementTarget:r.getAttribute("target"),formElementText:Ht(r)})}))}))},t}(Jt),er=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.setup=function(){this.triggerEvent({})},t}(Jt),tr=function(e){function t(r,n){var i,o=e.call(this,r,n)||this;return o.interval=Math.max(null!==(i=r.interval)&&void 0!==i?i:t.DEFAULT_INTERVAL,t.MIN_INTERVAL),o.limit=r.limit,o.count=0,o}return c(t,e),t.prototype.setup=function(){var e=this;setTimeout((function(){e.limit&&e.count>=e.limit||(e.count++,e.triggerEvent({}),e.setup())}),this.interval)},t.DEFAULT_INTERVAL=1e4,t.MIN_INTERVAL=200,t}(Jt),rr=function(e){function t(t,r){var n,i,o,s=e.call(this,t,r)||this;return s.play=null!==(n=t.play)&&void 0!==n&&n,s.pause=null!==(i=t.play)&&void 0!==i&&i,s.ended=null!==(o=t.ended)&&void 0!==o&&o,s}return c(t,e),t.prototype.setup=function(){var e=this;$((function(){var t=function(t){var r=t.target;"pause"===t.type&&r.ended||e.triggerEvent({videoCurrentTime:r.currentTime,videoDuration:r.duration,videoElement:r,videoPercent:r.duration?100*Math.floor(r.currentTime/r.duration):0,videoStatus:r.ended?"ended":r.paused?"paused":r.seeking?"seeking":"playing",videoUrl:r.currentSrc})};document.querySelectorAll("video").forEach((function(r){e.play&&r.addEventListener("play",t),e.pause&&r.addEventListener("pause",t),e.ended&&r.addEventListener("ended",t,{once:!0})}))}))},t}(Jt);var nr,ir=function(){function e(e,t){var r=this;this.pixel=e,this.events=t.events.map((function(e){return new Bt(e,r)})),this.triggers=t.triggers.map((function(e){return function(e,t){switch(e.type){case Vt.AllElementsClick:return new Yt(e,t);case Vt.AllLinksClick:return new zt(e,t);case Vt.FormSubmit:return new Xt(e,t);case Vt.PageView:return new er(e,t);case Vt.Timer:return new tr(e,t);case Vt.Video:return new rr(e,t)}}(e,r)}))}return e.prototype.setup=function(){this.triggers.forEach((function(e){return e.setup()}))},e.prototype.trigger=function(e){this.events.filter((function(t){return t.triggers.includes(e)})).forEach((function(e){return e.fireEvent()}))},e.fromConfig=function(t,r){var n,i;return new e(t,{events:(null!==(n=null==r?void 0:r.events)&&void 0!==n?n:[]).map((function(e){return{eventName:e.event_name,triggers:v([],f(e.triggers),!1)}})),triggers:(null!==(i=null==r?void 0:r.triggers)&&void 0!==i?i:[]).map((function(e){var t=e.conditions,r=d(e,["conditions"]);return u(u({},r),{conditions:t.map((function(e){return Ft.fromConfig(e)}))})}))})},e}(),or=function(){function e(e){this.key=e,this.queue=[]}return Object.defineProperty(e.prototype,"hasConsent",{get:function(){return this.level||"undefined"==typeof localStorage||(this.level=localStorage.getItem(this.key)||"denied"),"granted"===this.level},enumerable:!1,configurable:!0}),e.prototype.set=function(e){e!==this.level&&"undefined"!=typeof localStorage&&localStorage.setItem(this.key,e),this.level=e,this.hasConsent&&this.flush()},e.prototype.relay=function(e){this.hasConsent?e():this.queue.push(e)},e.prototype.flush=function(){this.queue.forEach((function(e){return e()})),this.queue=[]},e}(),sr=function(){function e(e,t){this.pixelInterface=e,this.logger=t,this.analyticsQueue=new or("__cvg_consent_analytics"),this.marketingQueue=new or("__cvg_consent_marketing")}return e.prototype.set=function(e,t){this.logger.debug("setting consent for cmp=".concat(t),e),this.pixelInterface.setProperties({$consent:{analytics:e.analytics,marketing:e.marketing},$cmp:t||null}),this.analyticsQueue.set(e.analytics||"denied"),this.marketingQueue.set(e.marketing||"denied")},e.prototype.relay=function(e,t){switch(t){case"analytics":this.analyticsQueue.relay(e);break;case"marketing":this.marketingQueue.relay(e);break;default:e()}},e}(),ar=function(){function e(e){this.PROFILE_PROPERTIES_FLUSH_BEAT=200;var t=e.utils,r=e.browser,n=e.logger,i=e.publicToken,o=e.pixelRevisionId;this.utils=t,this.browser=r,this.profileProperties={},this.eventProperties={},this.sessionProperties={},this.aliases=[],this.queue=[],this.logger=n,this.publicToken=i,this.pixelRevisionId=o}return e.prototype.init=function(e){this.uid=e,this.cookieUrn="urn:cookie:".concat(e),this.addAlias(this.cookieUrn),this.setDefaultProfileProperties()},e.prototype.setSessionId=function(e){this.sid=e},e.prototype.setProperty=function(e,t){var r;this.setProperties(((r={})[e]=t,r))},e.prototype.setProperties=function(e){if(0!==Object.keys(e).length){var t=u(u({},this.profileProperties),e);L(this.profileProperties,t)?this.logger.debug("properties did not change, will not flush",t):(this.profileProperties=t,this.ensureFlushed())}},e.prototype.setSessionProperties=function(e){this.sessionProperties=u(u({},this.sessionProperties),e)},e.prototype.ensureFlushed=function(){var e=this;A()||(this.flushTimer&&clearTimeout(this.flushTimer),this.flushTimer=setTimeout((function(){e.track({method:"track",eventName:"$identify",profileProperties:e.profileProperties,aliases:e.aliases}),e.flushTimer=void 0}),this.PROFILE_PROPERTIES_FLUSH_BEAT))},e.prototype.flushProfileProperties=function(){clearTimeout(this.flushTimer),this.flushTimer=void 0},e.prototype.setEventProperty=function(e,t){this.eventProperties[e]=t},e.prototype.setEventProperties=function(e){this.eventProperties=u(u({},this.eventProperties),e)},e.prototype.addAlias=function(e){var t=this;Array.isArray(e)?e.forEach((function(e){return t.addAlias(e)})):"string"==typeof e&&-1===this.aliases.indexOf(e)&&(this.aliases.push(e),this.ensureFlushed())},e.prototype.track=function(e){this.flushProfileProperties(),this.handler?this.handler(e):this.queue.push(e)},e.prototype.forward=function(e){this.handler?this.handler(e):this.queue.push(e)},e.prototype.setHandler=function(e){this.handler=e,this.queue.forEach((function(t){return e(t)})),this.queue=[]},e.prototype.setDefaultProfileProperties=function(){this.profileProperties=u(u({},this.profileProperties),{$user_agent:this.browser.navigator.userAgent,$screen_resolution:this.browser.screen_resolution,$is_mobile:this.utils.isMobile(),$timezone:this.browser.timeZone,$language:this.browser.navigator.language,$cookie_id:this.uid,cookie_id:this.uid})},e.prototype.getDefaultEventProperties=function(){return{$version:"2",$pixel_revision_id:this.pixelRevisionId,$url:this.browser.window.location.href,$referrer:this.browser.document.referrer,$title:this.browser.document.title,$sales_channel_type:"web",referrer:this.browser.document.referrer}},e}(),cr=function(){function e(e,t,r,n,i,o,s){var a=this;this.rateLimiter=new b(5,5),this.browser=e,this.utils=t,this.logger=r,this.publicToken=s.publicToken,this.includeIpAddress=void 0===s.includeIpAddress||s.includeIpAddress,this.pixelInterface=n,this.consentManager=i,this.integrations=o,this.connectionConfigs=s.connections||[],this.setupConnections(),this.pixelInterface.setHandler((function(e){return a.process.bind(a)(e)}))}return e.create=function(t,r){return p(this,void 0,void 0,(function(){var n,i,o,s,a,c,d,l=this;return h(this,(function(f){switch(f.label){case 0:return n=new Be(t.logLevel,t.publicToken),r=r||new Ge(n),(i=new q(r)).detectBot()?(n.info("Detected bot, not setting up Converge"),[2]):[4,i.detectInternalUser()];case 1:return f.sent()?(n.info("Detected internal user, not setting up Converge"),[2]):(o=t.publicToken,s=new ar(u({utils:i,browser:r,logger:n},t)),[4,i.setUid()]);case 2:return a=f.sent(),s.init(a),A()||ir.fromConfig(s,t.customEventsConfig).setup(),c=new sr(s,n),v={pixel:s,config:t.integrationConfig,consentManager:c},d={trackingSnippets:Fe.create(v),facebook:j.create(v),klaviyo:Q.create(v),tiktok:_e.create(v),criteo:F.create(v),ga4:H.create(v),shopify:ye.create(v),utm:ke.create(v),adBlocker:Ce.create(v),pinterest:Ie.create(v),taboola:Pe.create(v),outbrain:Se.create(v),funnelish:Ee.create(v),MGID:Te.create(v),cmp:xe.create(v),gclid:Ne.create(v),reddit:Ae.create(v),snapchat:De.create(v),awin:Oe.create(v),calendly:Le.create(v),postscript:qe.create(v),onetrust:Ue.create(v),cookiebot:Re.create(v),cookieyes:Me.create(v),cookiefirst:je.create(v),usercentrics:Ve.create(v)},[4,Promise.all(Object.values(d).map((function(e){return p(l,void 0,void 0,(function(){var t;return h(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,null==e?void 0:e.setup()];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),M(t,r,o),[3,3];case 3:return[2]}}))}))})))];case 3:return f.sent(),[2,new e(r,i,n,s,c,d,t)]}var v}))}))},e.prototype.process=function(e){return p(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:switch(e.method){case"track":case"forward":return[3,1];case"set":return[3,4];case"event":return[3,5];case"link_domain":return[3,8];case"cvg_uid":return[3,9];case"init":return[3,10];case"consent":return[3,11]}return[3,12];case 1:return[4,this.rateLimiter.acquireToken()];case 2:return t.sent(),[4,this.track(u(u({},e),{method:"track",skipIngestion:"forward"===e.method}))];case 3:return[2,t.sent()];case 4:return e.alias&&this.pixelInterface.addAlias(e.alias),e.aliases&&this.pixelInterface.addAlias(e.aliases),e.properties&&this.pixelInterface.setProperties(e.properties),e.profileProperties&&this.pixelInterface.setProperties(e.profileProperties),e.eventProperties&&this.pixelInterface.setEventProperties(e.eventProperties),[2];case 5:return[4,this.rateLimiter.acquireToken()];case 6:return t.sent(),[4,this.track(u(u({},e),{method:"track",eventName:e.event,eventID:e.eventId}))];case 7:return[2,t.sent()];case 8:return[2,this.linkDomain(e.domain)];case 9:e.resolve&&e.resolve(this.pixelInterface.uid||""),t.label=10;case 10:return[2];case 11:if("analytics"in e||"marketing"in e)return this.consentManager.set(e),[2];t.label=12;case 12:return this.logger.error("Invalid method",e),[2]}}))}))},e.prototype.registerParameters=function(e,t){t&&this.pixelInterface.addAlias(t),e&&this.pixelInterface.setProperties(e)},e.prototype.forwardToConnections=function(e){var t=this;this.connectionConfigs.forEach((function(r){t.consentManager.relay((function(){t.forwardToConnection(r,e)}),r.required_consent_category)}))},e.prototype.sendEvent=function(e){return p(this,void 0,void 0,(function(){var t;return h(this,(function(r){switch(r.label){case 0:return this.pixelInterface.flushProfileProperties(),t=fetch("".concat(_(),"/track?public_token=").concat(this.publicToken),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),keepalive:!0}),this.forwardToConnections({method:"forward",eventName:e.event_name,properties:e.properties,profileProperties:e.profile_properties,eventID:e.event_id}),[4,t];case 1:return[2,r.sent()]}}))}))},e.prototype.track=function(e){return p(this,void 0,void 0,(function(){var t,r,n,i,o,s,a,c,d,p,l,f,v,g;return h(this,(function(h){switch(h.label){case 0:return this.publicToken?(t=e.eventName,r=e.eventID,n=e.aliases,i=e.properties,o=e.profileProperties,s=e.resolve,a=e.reject,c=e.skipIngestion,d=void 0!==c&&c,this.registerParameters(o,n),p=u(u(u(u({},this.pixelInterface.getDefaultEventProperties()),this.pixelInterface.profileProperties),this.pixelInterface.eventProperties),i),(l=r)||(l=N()),[4,this.sendEvent({event_name:t,distinct_id:this.pixelInterface.aliases,event_id:l,properties:p,include_ip_address:this.includeIpAddress,profile_properties:this.pixelInterface.profileProperties,skip_ingestion:d,session_id:this.pixelInterface.sid,session_properties:this.pixelInterface.sessionProperties})]):(this.logger.error("Converge pixel not initialized, skipping track",e),[2]);case 1:return[4,(f=h.sent()).text()];case 2:if(g=h.sent(),200===f.status&&"1"===g||(v=new Error("Failed to track event: status ".concat(f.status,", response ").concat(g))),v)throw a&&a(v),this.logger.error("Could not track event",v),v;return s&&s(g),[2]}}))}))},e.prototype.forwardToConnection=function(e,t){var r;try{var n=Rt(e.config);if(!n)return;var i=new n({browser:this.browser,utils:this.utils,logger:this.logger,connection_id:e.connection_id,config:e.config,publicToken:this.publicToken,connectionEventLogger:new oe({browser:this.browser,logger:this.logger,config:e,publicToken:this.publicToken,cookieUrn:this.pixelInterface.cookieUrn}),pixel:this.pixelInterface,event_mappings:e.event_mappings,filters:e.filters,version:null!==(r=e.version)&&void 0!==r?r:1},t);2===e.version?i.forwardV2():i.forward()}catch(e){this.handleError(e)}},e.prototype.setupConnection=function(e){var t,r=e.config,n=e.connection_id,i=Rt(r);if(i){var o={browser:this.browser,utils:this.utils,logger:this.logger,connection_id:n,config:r,publicToken:this.publicToken,connectionEventLogger:new oe({browser:this.browser,logger:this.logger,config:e,publicToken:this.publicToken,cookieUrn:this.pixelInterface.cookieUrn}),pixel:this.pixelInterface,event_mappings:e.event_mappings,filters:e.filters,version:null!==(t=e.version)&&void 0!==t?t:1};try{i.setup(o)}catch(e){this.handleError(e)}}},e.prototype.setupConnections=function(){var e,t,r=this,n=function(e){i.consentManager.relay((function(){r.setupConnection(e)}),e.required_consent_category)},i=this;try{for(var o=l(this.connectionConfigs||[]),s=o.next();!s.done;s=o.next()){n(s.value)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e.prototype.handleError=function(e){return p(this,void 0,void 0,(function(){return h(this,(function(t){return this.logger.error("Unhandled error",e),M(e,this.browser,this.publicToken),[2]}))}))},e.prototype.linkDomain=function(e){var t=this;document.addEventListener("click",(function(r){var n,i=null===(n=r.target)||void 0===n?void 0:n.closest("a");if(i&&-1!==i.href.indexOf(e)){var o=-1===i.href.indexOf("?")?"?":"&",s="".concat(t.utils.UID_COOKIE,"=").concat(t.pixelInterface.uid),a=t.pixelInterface.sid?"&".concat(ke.SESSION_ID_COOKIE,"=").concat(t.pixelInterface.sid):"";i.href+="".concat(o).concat(s).concat(a)}}))},e.prototype.getCookieId=function(){return this.pixelInterface.uid},e.prototype.getSessionId=function(){return this.pixelInterface.sid},e}(),ur={set_endpoint:10,proxy:20,init:30,consent:40,cvg_uid:50,link_domain:60,set:70,track:80,forward:80,event:80},dr=function(e){var t;return null!==(t=(null==e?void 0:e.length)&&ur[e[0].method])&&void 0!==t?t:999},pr=function(){var e,t,r,n=this;if(this.preInitQueue=[],this.process=function(e){return p(n,void 0,void 0,(function(){var t,r,n;return h(this,(function(i){switch(i.label){case 0:return i.trys.push([0,10,,11]),"set_endpoint"!==e.method?[3,1]:(window.__cvg_api_endpoint=e.endpoint,[3,9]);case 1:return"proxy"!==e.method?[3,2]:(window.__cvg_api_endpoint=e.tracking,window.__cvg_proxy_tracking=e.tracking,window.__cvg_proxy_static=e.static,[3,9]);case 2:return this.handler?[4,this.handler(e)]:[3,4];case 3:return i.sent(),[3,9];case 4:return"init"!==e.method?[3,6]:[4,this.init(e)];case 5:return i.sent(),[3,9];case 6:return"consent"===e.method&&"consent"in e?(console.warn('The "consent" argument on the consent method is deprecated.'),[4,this.consentDepr(e.consent)]):[3,8];case 7:return i.sent(),[3,9];case 8:this.preInitQueue.push(e),i.label=9;case 9:return[3,11];case 10:return t=i.sent(),M(t,null===(r=this.pixel)||void 0===r?void 0:r.browser,null===(n=this.initArgs)||void 0===n?void 0:n.publicToken),[3,11];case 11:return[2]}}))}))},this.init=function(e){return p(n,void 0,void 0,(function(){var t;return h(this,(function(r){switch(r.label){case 0:return this.initArgs?[2]:(this.initArgs=e,this.hasConsent=this.hasConsent||null===(t=this.initArgs.consent)||void 0===t||t,this.hasConsent?[4,this.setup()]:[2]);case 1:return r.sent(),[2]}}))}))},this.consentDepr=function(e){return p(n,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this.hasConsent===e?[2]:(this.hasConsent=!!e,this.hasConsent?[4,this.setup()]:[3,2]);case 1:return t.sent(),[3,3];case 2:this.pixel=void 0,this.handler=void 0,t.label=3;case 3:return[2]}}))}))},this.setup=function(){return p(n,void 0,void 0,(function(){var e;return h(this,(function(t){switch(t.label){case 0:return!this.initArgs||this.pixel?[2]:(window.__cvg_init=this.initArgs,e=this,[4,cr.create(this.initArgs)]);case 1:return e.pixel=t.sent(),this.pixel?(this.handler=this.pixel.process.bind(this.pixel),this.emptyQueue(),[2]):[2]}}))}))},this.emptyQueue=function(){var e,t;if(n.handler){try{for(var r=l(n.preInitQueue),i=r.next();!i.done;i=r.next()){var o=i.value;n.handler(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}n.preInitQueue=[]}},this.hasConsent=!1,window.cvg){window.cvg.process=this.process.bind(this);try{window.cvg.queue=null===(e=window.cvg.queue)||void 0===e?void 0:e.sort((function(e,t){return dr(e)-dr(t)}))}catch(e){console.warn("Failed to sort queue by priority",e)}for(;null===(r=null===(t=window.cvg)||void 0===t?void 0:t.queue)||void 0===r?void 0:r.length;){var i=window.cvg.queue.shift();(null==i?void 0:i.length)&&this.process(i[0])}}else window.cvg=function(e){return n.process(e)}};e.convergeProcessor=void 0;try{e.convergeProcessor=new pr,window.__cvg_pixel&&window.__cvg_pixel.public_token&&window.cvg&&window.cvg({method:"init",publicToken:window.__cvg_pixel.public_token,pixelRevisionId:window.__cvg_pixel.pixel_revision_id,integrationConfig:window.__cvg_pixel.integration_config||{},connections:window.__cvg_pixel.connections||[],includeIpAddress:window.__cvg_pixel.include_ip_address,builtAt:window.__cvg_pixel.built_at,customEventsConfig:window.__cvg_pixel.custom_events})}catch(e){M(e,void 0,null===(nr=window.__cvg_pixel)||void 0===nr?void 0:nr.public_token)}}({});
